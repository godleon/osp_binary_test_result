<!doctype html>
<html ng-app="App">
<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <meta name="generator" content="Rally version 0.8.2~dev107">
  <title>Rally | Rally Task Report</title>
  
  
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/nvd3/1.1.15-beta/nv.d3.min.css">
  <script type="text/javascript" src="https://ajax.googleapis.com/ajax/libs/angularjs/1.3.3/angular.min.js"></script>
  <script type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/d3/3.4.13/d3.min.js"></script>
  <script type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/nvd3/1.1.15-beta/nv.d3.min.js"></script>
  

  <script type="text/javascript">
    "use strict";
    var widgetDirective = function($compile) {
  var Chart = {
    _render: function(node, data, chart, do_after){
      nv.addGraph(function() {
        d3.select(node)
          .datum(data).transition().duration(0)
          .call(chart);
        if (typeof do_after === "function") {
          do_after(node, chart)
        }
        nv.utils.windowResize(chart.update);
      })
    },
    _widgets: {
      Pie: "pie",
      StackedArea: "stack",
      Lines: "lines",
      Histogram: "histogram"
    },
    get_chart: function(widget) {
      if (widget in this._widgets) {
        var name = this._widgets[widget];
        return Chart[name]
      }
      return function() { console.log("Error: unexpected widget:", widget) }
    },
    pie: function(node, data, opts, do_after) {
      var chart = nv.models.pieChart()
        .x(function(d) { return d.key })
        .y(function(d) { return d.values })
        .showLabels(true)
        .labelType("percent")
        .donut(true)
        .donutRatio(0.25)
        .donutLabelsOutside(true)
        .color(function(d){
          if (d.data && d.data.color) { return d.data.color }
        });
      var colorizer = new Chart.colorizer("errors"), data_ = [];
      for (var i in data) {
        data_.push({key:data[i][0], values:data[i][1], color:colorizer.get_color(data[i][0])})
      }
      Chart._render(node, data_, chart)
    },
    colorizer: function(failure_key, failure_color) {
      this.failure_key = failure_key || "failed_duration";
      this.failure_color = failure_color || "#d62728";  // red
      this.color_idx = -1;
      /* NOTE(amaretskiy): this is actually a result of
         d3.scale.category20().range(), excluding red color (#d62728)
         which is reserved for errors */
      this.colors = ["#1f77b4", "#aec7e8", "#ff7f0e", "#ffbb78", "#2ca02c",
                     "#98df8a", "#ff9896", "#9467bd", "#c5b0d5", "#8c564b",
                     "#c49c94", "#e377c2", "#f7b6d2", "#7f7f7f", "#c7c7c7",
                     "#bcbd22", "#dbdb8d", "#17becf", "#9edae5"];
      this.get_color = function(key) {
        if (key === this.failure_key) {
          return this.failure_color
        }
        if (this.color_idx > (this.colors.length - 2)) {
          this.color_idx = 0
        } else {
          this.color_idx++
        }
        return this.colors[this.color_idx]
      }
    },
    stack: function(node, data, opts, do_after) {
      var chart = nv.models.stackedAreaChart()
        .x(function(d) { return d[0] })
        .y(function(d) { return d[1] })
        .useInteractiveGuideline(opts.guide)
        .showControls(opts.controls)
        .clipEdge(true);
      chart.xAxis
        .axisLabel(opts.xname)
        .tickFormat(opts.xformat)
        .showMaxMin(opts.showmaxmin);
      chart.yAxis
        .orient("left")
        .tickFormat(d3.format(opts.yformat || ",.3f"));
      var colorizer = new Chart.colorizer(), data_ = [];
      for (var i in data) {
        data_.push({key:data[i][0], values:data[i][1], color:colorizer.get_color(data[i][0])})
      }
      Chart._render(node, data_, chart, do_after);
    },
    lines: function(node, data, opts, do_after) {
      var chart = nv.models.lineChart()
        .x(function(d) { return d[0] })
        .y(function(d) { return d[1] })
        .useInteractiveGuideline(opts.guide)
        .clipEdge(true);
      chart.xAxis
        .axisLabel(opts.xname)
        .tickFormat(opts.xformat)
        .rotateLabels(opts.xrotate)
        .showMaxMin(opts.showmaxmin);
      chart.yAxis
        .orient("left")
        .tickFormat(d3.format(opts.yformat || ",.3f"));
      var colorizer = new Chart.colorizer(), data_ = [];
      for (var i in data) {
        data_.push({key:data[i][0], values:data[i][1], color:colorizer.get_color(data[i][0])})
      }
      Chart._render(node, data_, chart, do_after)
    },
    histogram: function(node, data, opts) {
      var chart = nv.models.multiBarChart()
        .reduceXTicks(true)
        .showControls(false)
        .transitionDuration(0)
        .groupSpacing(0.05);
      chart
        .legend.radioButtonMode(true);
      chart.xAxis
        .axisLabel("Duration (seconds)")
        .tickFormat(d3.format(",.2f"));
      chart.yAxis
        .axisLabel("Iterations (frequency)")
        .tickFormat(d3.format("d"));
      Chart._render(node, data, chart)
    }
  };

  return {
    restrict: "A",
    scope: { data: "=" },
    link: function(scope, element, attrs) {
      scope.$watch("data", function(data) {
        if (! data) { return console.log("Chart has no data to render!") }
        if (attrs.widget === "Table") {
          var ng_class = attrs.lastrowClass ? " ng-class='{"+attrs.lastrowClass+":$last}'" : "";
          var template = "<table class='striped'><thead>" +
            "<tr><th ng-repeat='i in data.cols track by $index'>{{i}}<tr>" +
            "</thead><tbody>" +
            "<tr" + ng_class + " ng-repeat='row in data.rows track by $index'>" +
            "<td ng-repeat='i in row track by $index'>{{i}}" +
            "<tr>" +
            "</tbody></table>";
          var el = element.empty().append($compile(template)(scope)).children()[0]
        } else if (attrs.widget === "TextArea") {
          var template = "<div style='padding:0 0 5px' ng-repeat='str in data track by $index'>{{str}}</div><div style='height:10px'></div>";
          var el = element.empty().append($compile(template)(scope)).children()[0]
        } else {

          var el_chart = element.addClass("chart").css({display:"block"});
          var el = el_chart.html("<svg></svg>").children()[0];

          var do_after = null;

          if (attrs.widget in {StackedArea:0, Lines:0}) {

            /* Hide widget if not enough data */
            if ((! data.length) || (data[0].length < 1) || (data[0][1].length < 2)) {
              return element.empty().css({display:"none"})
            }

            /* NOTE(amaretskiy): Dirty fix for changing chart width in case
               if there are too long Y values that overlaps chart box. */
            var do_after = function(node, chart){
              var g_box = angular.element(el_chart[0].querySelector(".nv-y.nv-axis"));

              if (g_box && g_box[0] && g_box[0].getBBox) {

                try {
                  // 30 is padding aroung graphs
                  var width = g_box[0].getBBox().width + 30;
                } catch (err) {
                  // This happens sometimes, just skip silently
                  return
                }

                // 890 is chart width (set by CSS)
                if (typeof width === "number" && width > 890) {
                  width = (890 * 2) - width;
                  if (width > 0) {
                    angular.element(node).css({width:width+"px"});
                    chart.update()
                  }
                }
              }
            }
          }
          else if (attrs.widget === "Pie") {
            if (! data.length) {
              return element.empty().css({display:"none"})
            }
          }

          var opts = {
            xname: attrs.nameX || "",
            xrotate: attrs.rotateX || 0,
            yformat: attrs.formatY || ",.3f",
            controls: attrs.controls === "true",
            guide: attrs.guide === "true",
            showmaxmin: attrs.showmaxmin === "true"
          };
          if (attrs.formatDateX) {
            opts.xformat = function(d) { return d3.time.format(attrs.formatDateX)(new Date(d)) }
          } else {
            opts.xformat = d3.format(attrs.formatX || "d")
          }
          Chart.get_chart(attrs.widget)(el, data, opts, do_after);
        }

        if (attrs.nameY) {
          /* NOTE(amaretskiy): Dirty fix for displaying Y-axis label correctly.
             I believe sometimes NVD3 will allow doing this in normal way */
          var label_y = angular.element("<div>").addClass("chart-label-y").text(attrs.nameY);
          angular.element(el).parent().prepend(label_y)
        }

        if (attrs.description) {
          var desc_el = angular.element("<div>").addClass(attrs.descriptionClass || "h3").text(attrs.description);
          angular.element(el).parent().prepend(desc_el)
        }

        if (attrs.title) {
          var title_el = angular.element("<div>").addClass(attrs.titleClass || "h2").text(attrs.title);
          angular.element(el).parent().prepend(title_el)
        }

        angular.element(el).parent().append(angular.element("<div style='clear:both'>"))
      });
    }
  }
};

    var controllerFunction = function($scope, $location) {
        $scope.source = "{\n  \"NovaServers.boot_and_show_server\": [\n    {\n      \"args\": {\n        \"flavor\": {\n          \"name\": \"m1.medium\"\n        }, \n        \"image\": {\n          \"name\": \"^cirros.*-disk$\"\n        }\n      }, \n      \"context\": {\n        \"quotas\": {\n          \"cinder\": {\n            \"gigabytes\": -1, \n            \"snapshots\": -1, \n            \"volumes\": -1\n          }, \n          \"neutron\": {\n            \"floatingip\": -1, \n            \"network\": -1, \n            \"port\": -1, \n            \"router\": -1, \n            \"security_group\": -1, \n            \"security_group_rule\": -1, \n            \"subnet\": -1\n          }, \n          \"nova\": {\n            \"cores\": -1, \n            \"fixed_ips\": -1, \n            \"floating_ips\": -1, \n            \"injected_file_content_bytes\": -1, \n            \"injected_file_path_bytes\": -1, \n            \"injected_files\": -1, \n            \"instances\": -1, \n            \"key_pairs\": -1, \n            \"metadata_items\": -1, \n            \"ram\": -1, \n            \"security_group_rules\": -1, \n            \"security_groups\": -1, \n            \"server_group_members\": -1, \n            \"server_groups\": -1\n          }\n        }, \n        \"users\": {\n          \"tenants\": 1, \n          \"users_per_tenant\": 1\n        }\n      }, \n      \"hooks\": [], \n      \"runner\": {\n        \"max_cpu_count\": 1, \n        \"rps\": 1.4, \n        \"times\": 300, \n        \"type\": \"rps\"\n      }, \n      \"sla\": {\n        \"failure_rate\": {\n          \"max\": 0\n        }, \n        \"max_avg_duration\": 30\n      }\n    }\n  ]\n}";
        $scope.scenarios = [{"runner": "rps", "hooks": [], "pos": "0", "atomic": {"pie": [["nova.boot_server", 129.23716107606887], ["nova.show_server", 0.3221599146723747]], "iter": [["nova.boot_server", [[1, 10.218503952026367], [2, 8.069424867630005], [3, 243.52242493629456], [4, 110.18389105796814], [5, 110.13471102714539], [6, 241.30124807357788], [7, 108.2228319644928], [8, 8.198280096054077], [9, 239.70093083381653], [10, 105.93116688728333], [11, 8.15898585319519], [12, 236.4753758907318], [13, 104.21400094032288], [14, 10.011920928955078], [15, 234.29458498954773], [16, 102.17364287376404], [17, 10.136049032211304], [18, 233.56206107139587], [19, 99.73663997650146], [20, 9.7897789478302], [21, 230.61881804466248], [22, 98.05716586112976], [23, 9.198645114898682], [24, 229.04570817947388], [25, 227.36634993553162], [26, 95.6180009841919], [27, 9.89647102355957], [28, 93.91170597076416], [29, 9.987491846084595], [30, 223.73614597320557], [31, 106.76963400840759], [32, 109.82525181770325], [33, 105.34453105926514], [34, 9.446938037872314], [35, 236.28663206100464], [36, 233.22039103507996], [37, 231.89517879486084], [38, 106.75016808509827], [39, 105.54676008224487], [40, 103.93183708190918], [41, 8.032302856445312], [42, 228.08250212669373], [43, 228.21436595916748], [44, 229.62969493865967], [45, 100.9119131565094], [46, 100.2292890548706], [47, 99.39839482307434], [48, 8.857521057128906], [49, 223.0112829208374], [50, 222.95551705360413], [51, 224.7254421710968], [52, 95.83369016647339], [53, 98.75085687637329], [54, 97.20920586585999], [55, 9.33915400505066], [56, 221.1330440044403], [57, 231.19008994102478], [58, 231.44485998153687], [59, 109.51131892204285], [60, 109.19495105743408], [61, 100.67098593711853], [62, 107.43935203552246], [63, 106.97411680221558], [64, 105.66216111183167], [65, 104.69008302688599], [66, 104.04024577140808], [67, 103.98684310913086], [68, 102.76152992248535], [69, 106.20995497703552], [70, 116.38993000984192], [71, 116.65603590011597], [72, 119.63481783866882], [73, 115.00441408157349], [74, 117.26631689071655], [75, 117.43164491653442], [76, 9.748740911483765], [77, 9.900323152542114], [78, 218.7362380027771], [79, 218.15199995040894], [80, 215.16293501853943], [81, 112.58480906486511], [82, 111.49091601371765], [83, 111.90593004226685], [84, 213.08125615119934], [85, 214.79471802711487], [86, 8.734153985977173], [87, 9.94172191619873], [88, 10.518821001052856], [89, 9.875303030014038], [90, 211.1193699836731], [91, 210.01078701019287], [92, 209.14578413963318], [93, 10.358078002929688], [94, 219.02180194854736], [95, 226.7844569683075], [96, 217.70541191101074], [97, 9.280515909194946], [98, 223.7841808795929], [99, 223.99265694618225], [100, 222.404767036438], [101, 10.052075147628784], [102, 221.45020079612732], [103, 220.40733695030212], [104, 220.46034812927246], [105, 9.992402076721191], [106, 10.204762935638428], [107, 218.00012183189392], [108, 220.5292830467224], [109, 219.56580209732056], [110, 233.50510501861572], [111, 232.32233095169067], [112, 228.26557898521423], [113, 11.81869888305664], [114, 10.659262895584106], [115, 89.1941819190979], [116, 92.62364602088928], [117, 92.34118509292603], [118, 223.30672407150269], [119, 223.3363630771637], [120, 225.52235102653503], [121, 89.10368704795837], [122, 104.74792814254761], [123, 99.6498441696167], [124, 219.58597922325134], [125, 222.58501720428467], [126, 221.62665009498596], [127, 10.55109190940857], [128, 95.0021162033081], [129, 93.87318086624146], [130, 99.49693894386292], [131, 217.32734203338623], [132, 226.10056400299072], [133, 223.7325701713562], [134, 11.823146104812622], [135, 10.073509931564331], [136, 94.6574239730835], [137, 88.06748509407043], [138, 92.54379200935364], [139, 220.03006291389465], [140, 218.82386994361877], [141, 220.4526789188385], [142, 89.79259705543518], [143, 90.44695901870728], [144, 107.15386891365051], [145, 106.54081606864929], [146, 96.81622314453125], [147, 105.63502812385559], [148, 104.32292890548706], [149, 103.70459294319153], [150, 103.32443690299988], [151, 102.68285202980042], [152, 105.17633199691772], [153, 100.05560803413391], [154, 103.25776696205139], [155, 115.13403296470642], [156, 113.78775906562805], [157, 113.4657690525055], [158, 112.4970018863678], [159, 108.4549548625946], [160, 111.0838189125061]]], ["nova.show_server", [[1, 0.4174518585205078], [2, 0.16904211044311523], [3, 0.17058682441711426], [4, 0.3869328498840332], [5, 0.21268987655639648], [6, 0.17401409149169922], [7, 0.5903170108795166], [8, 0.27831196784973145], [9, 0.1481947898864746], [10, 0.27825498580932617], [11, 0.29105615615844727], [12, 0.17401814460754395], [13, 0.3419201374053955], [14, 0.1603851318359375], [15, 0.20175504684448242], [16, 0.18452906608581543], [17, 0.4521820545196533], [18, 0.18539214134216309], [19, 0.2145709991455078], [20, 0.4103679656982422], [21, 0.1740269660949707], [22, 0.4882020950317383], [23, 0.6821649074554443], [24, 0.15085601806640625], [25, 0.3817000389099121], [26, 0.3066718578338623], [27, 0.3393399715423584], [28, 0.3543539047241211], [29, 0.2749359607696533], [30, 0.32595396041870117], [31, 0.4938499927520752], [32, 0.3311440944671631], [33, 0.49765801429748535], [34, 0.4750220775604248], [35, 0.15791893005371094], [36, 0.1632230281829834], [37, 0.613645076751709], [38, 0.35858798027038574], [39, 0.18199586868286133], [40, 0.40179991722106934], [41, 0.40609002113342285], [42, 0.16445708274841309], [43, 0.18541884422302246], [44, 0.18930888175964355], [45, 0.3416740894317627], [46, 0.1578669548034668], [47, 0.5117299556732178], [48, 0.4258100986480713], [49, 0.15003013610839844], [50, 0.29085612297058105], [51, 0.3209810256958008], [52, 0.16237998008728027], [53, 0.18571090698242188], [54, 0.18581008911132812], [55, 0.45764803886413574], [56, 0.28899288177490234], [57, 0.29833507537841797], [58, 0.17182111740112305], [59, 0.41504383087158203], [60, 0.16575288772583008], [61, 0.20960378646850586], [62, 0.3215179443359375], [63, 0.32367992401123047], [64, 0.47679686546325684], [65, 0.34488987922668457], [66, 0.20523691177368164], [67, 0.3119161128997803], [68, 0.5367898941040039], [69, 0.22413086891174316], [70, 0.5126919746398926], [71, 0.48418092727661133], [72, 0.1821880340576172], [73, 0.16603779792785645], [74, 0.2886052131652832], [75, 0.2000420093536377], [76, 0.49840593338012695], [77, 0.8548188209533691], [78, 0.30132293701171875], [79, 0.32021093368530273], [80, 0.4890708923339844], [81, 0.16101598739624023], [82, 0.5362958908081055], [83, 0.4130380153656006], [84, 0.39162111282348633], [85, 0.23562192916870117], [86, 0.6008949279785156], [87, 0.43835997581481934], [88, 0.7182250022888184], [89, 0.2870018482208252], [90, 0.15382099151611328], [91, 0.16627907752990723], [92, 0.15407109260559082], [93, 0.5399348735809326], [94, 0.2910749912261963], [95, 0.17800498008728027], [96, 0.16404080390930176], [97, 0.17257308959960938], [98, 0.3206210136413574], [99, 0.20611095428466797], [100, 0.43173885345458984], [101, 0.2573690414428711], [102, 0.3644449710845947], [103, 0.30158281326293945], [104, 0.17283987998962402], [105, 0.7123720645904541], [106, 0.29497599601745605], [107, 0.14785313606262207], [108, 0.2773721218109131], [109, 0.15368294715881348], [110, 0.27259206771850586], [111, 0.16087079048156738], [112, 0.167388916015625], [113, 0.456373929977417], [114, 0.4491260051727295], [115, 0.5095291137695312], [116, 0.38845300674438477], [117, 0.4900069236755371], [118, 0.2672760486602783], [119, 0.16854286193847656], [120, 0.27447986602783203], [121, 0.32024192810058594], [122, 0.32816004753112793], [123, 0.3264739513397217], [124, 0.17623209953308105], [125, 0.16970014572143555], [126, 0.15597987174987793], [127, 0.49353599548339844], [128, 0.3119039535522461], [129, 0.27554917335510254], [130, 0.3597290515899658], [131, 0.15141820907592773], [132, 0.16374707221984863], [133, 0.15244603157043457], [134, 0.3174400329589844], [135, 0.29001283645629883], [136, 0.3471050262451172], [137, 0.30124497413635254], [138, 0.4432981014251709], [139, 0.34291791915893555], [140, 0.28189802169799805], [141, 0.3347759246826172], [142, 0.4087040424346924], [143, 0.5356650352478027], [144, 0.3795499801635742], [145, 0.6377007961273193], [146, 0.4300849437713623], [147, 0.6302130222320557], [148, 0.5081839561462402], [149, 0.35092806816101074], [150, 0.4682929515838623], [151, 0.4729750156402588], [152, 0.3045639991760254], [153, 0.15524983406066895], [154, 0.37414002418518066], [155, 0.18199992179870605], [156, 0.17818593978881836], [157, 0.15618896484375], [158, 0.3115580081939697], [159, 0.30138206481933594], [160, 0.5458519458770752]]]], "histogram": {"data": [[{"disabled": 0, "values": [{"y": 30, "x": 26.146927631818333}, {"y": 0, "x": 44.26155240719135}, {"y": 0, "x": 62.376177182564376}, {"y": 0, "x": 80.49080195793739}, {"y": 17, "x": 98.60542673331041}, {"y": 53, "x": 116.72005150868344}, {"y": 3, "x": 134.83467628405646}, {"y": 0, "x": 152.94930105942947}, {"y": 0, "x": 171.0639258348025}, {"y": 0, "x": 189.1785506101755}, {"y": 0, "x": 207.29317538554852}, {"y": 34, "x": 225.40780016092157}, {"y": 23, "x": 243.52242493629458}], "key": "nova.boot_server", "view": "Square Root Choice"}, {"disabled": 1, "values": [{"y": 50, "x": 0.20223511182344878}, {"y": 7, "x": 0.2566170875842755}, {"y": 25, "x": 0.3109990633451022}, {"y": 26, "x": 0.3653810391059289}, {"y": 13, "x": 0.41976301486675555}, {"y": 11, "x": 0.47414499062758225}, {"y": 14, "x": 0.5285269663884089}, {"y": 5, "x": 0.5829089421492357}, {"y": 4, "x": 0.6372909179100623}, {"y": 2, "x": 0.691672893670889}, {"y": 2, "x": 0.7460548694317157}, {"y": 0, "x": 0.8004368451925424}, {"y": 1, "x": 0.8548188209533691}], "key": "nova.show_server", "view": "Square Root Choice"}], [{"disabled": 0, "values": [{"y": 30, "x": 34.19787197642856}, {"y": 0, "x": 60.36344109641181}, {"y": 0, "x": 86.52901021639506}, {"y": 64, "x": 112.69457933637831}, {"y": 9, "x": 138.86014845636157}, {"y": 0, "x": 165.02571757634482}, {"y": 0, "x": 191.19128669632806}, {"y": 7, "x": 217.3568558163113}, {"y": 50, "x": 243.52242493629456}], "key": "nova.boot_server", "view": "Sturges Formula"}, {"disabled": 1, "values": [{"y": 56, "x": 0.22640487882826063}, {"y": 25, "x": 0.3049566215938992}, {"y": 30, "x": 0.3835083643595377}, {"y": 19, "x": 0.4620601071251763}, {"y": 20, "x": 0.5406118498908149}, {"y": 4, "x": 0.6191635926564534}, {"y": 3, "x": 0.697715335422092}, {"y": 2, "x": 0.7762670781877306}, {"y": 1, "x": 0.8548188209533691}], "key": "nova.show_server", "view": "Sturges Formula"}], [{"disabled": 0, "values": [{"y": 30, "x": 29.440495772795245}, {"y": 0, "x": 50.84868868914518}, {"y": 0, "x": 72.25688160549511}, {"y": 8, "x": 93.66507452184504}, {"y": 59, "x": 115.07326743819497}, {"y": 6, "x": 136.4814603545449}, {"y": 0, "x": 157.88965327089483}, {"y": 0, "x": 179.29784618724477}, {"y": 0, "x": 200.70603910359472}, {"y": 23, "x": 222.11423201994464}, {"y": 34, "x": 243.52242493629456}], "key": "nova.boot_server", "view": "Rice Rule"}, {"disabled": 1, "values": [{"y": 53, "x": 0.2121227437799627}, {"y": 10, "x": 0.27639235149730335}, {"y": 35, "x": 0.340661959214644}, {"y": 17, "x": 0.4049315669319846}, {"y": 16, "x": 0.46920117464932526}, {"y": 15, "x": 0.5334707823666659}, {"y": 6, "x": 0.5977403900840066}, {"y": 4, "x": 0.6620099978013472}, {"y": 3, "x": 0.7262796055186878}, {"y": 0, "x": 0.7905492132360284}, {"y": 1, "x": 0.8548188209533691}], "key": "nova.show_server", "view": "Rice Rule"}]], "views": [{"id": 0, "name": "Square Root Choice"}, {"id": 1, "name": "Sturges Formula"}, {"id": 2, "name": "Rice Rule"}]}}, "iterations": {"pie": [["success", 160], ["errors", 0]], "iter": [["duration", [[1, 9.63611912727356], [2, 7.238574028015137], [3, 242.6931140422821], [4, 109.57093596458435], [5, 109.34750580787659], [6, 240.47537398338318], [7, 107.81326389312744], [8, 7.4767091274261475], [9, 238.84923100471497], [10, 105.20953321456909], [11, 7.450147867202759], [12, 235.64951395988464], [13, 103.5560359954834], [14, 9.172406911849976], [15, 233.49646186828613], [16, 101.35828614234924], [17, 9.588342905044556], [18, 232.7475528717041], [19, 98.95136404037476], [20, 9.200255870819092], [21, 229.79295587539673], [22, 97.5454728603363], [23, 8.880908966064453], [24, 228.1966688632965], [25, 226.7481689453125], [26, 94.92479109764099], [27, 9.235932111740112], [28, 93.26615500450134], [29, 9.26256799697876], [30, 223.06222987174988], [31, 106.26465797424316], [32, 109.15650415420532], [33, 104.84228706359863], [34, 8.922061204910278], [35, 235.44466400146484], [36, 232.38372111320496], [37, 231.50893592834473], [38, 106.1088650226593], [39, 104.72886896133423], [40, 103.33374881744385], [41, 7.438515901565552], [42, 227.24706411361694], [43, 227.39993405342102], [44, 228.819109916687], [45, 100.25369620323181], [46, 99.38726305961609], [47, 98.9102418422699], [48, 8.283429861068726], [49, 222.16143083572388], [50, 222.24647784233093], [51, 224.04652786254883], [52, 94.99617600440979], [53, 97.93667316436768], [54, 96.39517092704773], [55, 8.79690408706665], [56, 220.42214703559875], [57, 230.48855304718018], [58, 230.61678981781006], [59, 108.9264748096466], [60, 108.36080980300903], [61, 99.88070583343506], [62, 106.76096701622009], [63, 106.29790306091309], [64, 105.13906407356262], [65, 104.03509712219238], [66, 103.24558901786804], [67, 103.29886889457703], [68, 102.29842185974121], [69, 105.43419599533081], [70, 115.90273904800415], [71, 116.1403169631958], [72, 118.81711387634277], [73, 114.17055702209473], [74, 116.55503106117249], [75, 116.63181400299072], [76, 9.247262001037598], [77, 9.755254983901978], [78, 218.03767895698547], [79, 217.47231483459473], [80, 214.65212297439575], [81, 111.74594187736511], [82, 111.0273289680481], [83, 111.31908202171326], [84, 212.47298097610474], [85, 214.03044414520264], [86, 8.335165023803711], [87, 9.380178928375244], [88, 10.23714804649353], [89, 9.162406206130981], [90, 210.27329206466675], [91, 209.17717790603638], [92, 208.29995918273926], [93, 9.898126125335693], [94, 218.3129940032959], [95, 225.9625689983368], [96, 216.8695559501648], [97, 8.453187942504883], [98, 223.1049211025238], [99, 223.198872089386], [100, 221.8366060256958], [101, 9.309548139572144], [102, 220.81475615501404], [103, 219.7090311050415], [104, 219.6332950592041], [105, 9.704896926879883], [106, 9.499849081039429], [107, 217.1480748653412], [108, 219.8067569732666], [109, 218.71959400177002], [110, 232.7778022289276], [111, 231.4833037853241], [112, 227.4331500530243], [113, 11.275177955627441], [114, 10.108515977859497], [115, 88.70380210876465], [116, 92.01220417022705], [117, 91.83129692077637], [118, 222.57411098480225], [119, 222.50500583648682], [120, 224.7969298362732], [121, 88.4240369796753], [122, 104.07619309425354], [123, 98.97641515731812], [124, 218.7623209953308], [125, 221.75481820106506], [126, 220.78273510932922], [127, 10.044741153717041], [128, 94.31412100791931], [129, 93.14883804321289], [130, 98.85676503181458], [131, 216.47886490821838], [132, 225.26441192626953], [133, 222.88511991500854], [134, 11.140690088272095], [135, 9.363637924194336], [136, 94.00462484359741], [137, 87.36884117126465], [138, 91.98719692230225], [139, 219.37307810783386], [140, 218.1058599948883], [141, 219.78755688667297], [142, 89.20139598846436], [143, 89.98272895812988], [144, 106.53351902961731], [145, 106.17861008644104], [146, 96.24641299247742], [147, 105.26536107063293], [148, 103.83121490478516], [149, 103.05561995506287], [150, 102.79281997680664], [151, 102.15593123435974], [152, 104.48099899291992], [153, 99.2109649181366], [154, 102.6320161819458], [155, 114.3161301612854], [156, 112.96606302261353], [157, 112.6220600605011], [158, 111.80865406990051], [159, 107.75644993782043], [160, 110.62977313995361]]], ["idle_duration", [[1, 1.0], [2, 1.0], [3, 1.0], [4, 1.0], [5, 1.0], [6, 1.0], [7, 1.0], [8, 1.0], [9, 1.0], [10, 1.0], [11, 1.0], [12, 1.0], [13, 1.0], [14, 1.0], [15, 1.0], [16, 1.0], [17, 1.0], [18, 1.0], [19, 1.0], [20, 1.0], [21, 1.0], [22, 1.0], [23, 1.0], [24, 1.0], [25, 1.0], [26, 1.0], [27, 1.0], [28, 1.0], [29, 1.0], [30, 1.0], [31, 1.0], [32, 1.0], [33, 1.0], [34, 1.0], [35, 1.0], [36, 1.0], [37, 1.0], [38, 1.0], [39, 1.0], [40, 1.0], [41, 1.0], [42, 1.0], [43, 1.0], [44, 1.0], [45, 1.0], [46, 1.0], [47, 1.0], [48, 1.0], [49, 1.0], [50, 1.0], [51, 1.0], [52, 1.0], [53, 1.0], [54, 1.0], [55, 1.0], [56, 1.0], [57, 1.0], [58, 1.0], [59, 1.0], [60, 1.0], [61, 1.0], [62, 1.0], [63, 1.0], [64, 1.0], [65, 1.0], [66, 1.0], [67, 1.0], [68, 1.0], [69, 1.0], [70, 1.0], [71, 1.0], [72, 1.0], [73, 1.0], [74, 1.0], [75, 1.0], [76, 1.0], [77, 1.0], [78, 1.0], [79, 1.0], [80, 1.0], [81, 1.0], [82, 1.0], [83, 1.0], [84, 1.0], [85, 1.0], [86, 1.0], [87, 1.0], [88, 1.0], [89, 1.0], [90, 1.0], [91, 1.0], [92, 1.0], [93, 1.0], [94, 1.0], [95, 1.0], [96, 1.0], [97, 1.0], [98, 1.0], [99, 1.0], [100, 1.0], [101, 1.0], [102, 1.0], [103, 1.0], [104, 1.0], [105, 1.0], [106, 1.0], [107, 1.0], [108, 1.0], [109, 1.0], [110, 1.0], [111, 1.0], [112, 1.0], [113, 1.0], [114, 1.0], [115, 1.0], [116, 1.0], [117, 1.0], [118, 1.0], [119, 1.0], [120, 1.0], [121, 1.0], [122, 1.0], [123, 1.0], [124, 1.0], [125, 1.0], [126, 1.0], [127, 1.0], [128, 1.0], [129, 1.0], [130, 1.0], [131, 1.0], [132, 1.0], [133, 1.0], [134, 1.0], [135, 1.0], [136, 1.0], [137, 1.0], [138, 1.0], [139, 1.0], [140, 1.0], [141, 1.0], [142, 1.0], [143, 1.0], [144, 1.0], [145, 1.0], [146, 1.0], [147, 1.0], [148, 1.0], [149, 1.0], [150, 1.0], [151, 1.0], [152, 1.0], [153, 1.0], [154, 1.0], [155, 1.0], [156, 1.0], [157, 1.0], [158, 1.0], [159, 1.0], [160, 1.0]]]], "histogram": {"data": [[{"disabled": null, "values": [{"y": 30, "x": 25.350461721420288}, {"y": 0, "x": 43.46234941482544}, {"y": 0, "x": 61.57423710823059}, {"y": 0, "x": 79.68612480163574}, {"y": 17, "x": 97.7980124950409}, {"y": 52, "x": 115.90990018844604}, {"y": 4, "x": 134.0217878818512}, {"y": 0, "x": 152.13367557525635}, {"y": 0, "x": 170.2455632686615}, {"y": 0, "x": 188.35745096206665}, {"y": 0, "x": 206.4693386554718}, {"y": 34, "x": 224.58122634887695}, {"y": 23, "x": 242.6931140422821}], "key": "task", "view": "Square Root Choice"}], [{"disabled": null, "values": [{"y": 30, "x": 33.400189585155914}, {"y": 0, "x": 59.561805142296684}, {"y": 0, "x": 85.72342069943745}, {"y": 64, "x": 111.88503625657823}, {"y": 9, "x": 138.046651813719}, {"y": 0, "x": 164.20826737085977}, {"y": 0, "x": 190.36988292800055}, {"y": 7, "x": 216.53149848514133}, {"y": 50, "x": 242.6931140422821}], "key": "task", "view": "Sturges Formula"}], [{"disabled": null, "values": [{"y": 30, "x": 28.643532211130317}, {"y": 0, "x": 50.0484903942455}, {"y": 0, "x": 71.45344857736067}, {"y": 8, "x": 92.85840676047586}, {"y": 59, "x": 114.26336494359104}, {"y": 6, "x": 135.6683231267062}, {"y": 0, "x": 157.0732813098214}, {"y": 0, "x": 178.47823949293658}, {"y": 0, "x": 199.88319767605176}, {"y": 23, "x": 221.28815585916695}, {"y": 34, "x": 242.69311404228213}], "key": "task", "view": "Rice Rule"}]], "views": [{"id": 0, "name": "Square Root Choice"}, {"id": 1, "name": "Sturges Formula"}, {"id": 2, "name": "Rice Rule"}]}}, "table": {"rows": [["nova.boot_server", 8.032, 107.064, 228.344, 233.235, 243.522, 129.237, "100.0%", 160], ["nova.show_server", 0.148, 0.303, 0.51, 0.591, 0.855, 0.322, "100.0%", 160], ["total", 7.239, 106.416, 227.51, 232.402, 242.693, 128.559, "100.0%", 160]], "cols": ["Action", "Min (sec)", "Median (sec)", "90%ile (sec)", "95%ile (sec)", "Max (sec)", "Avg (sec)", "Success", "Count"]}, "errors": [], "iterations_count": 160, "load_duration": 319.7834689617157, "complete_output": [[], [], [], [], [], [], [], [], [], [], [], [], [], [], [], [], [], [], [], [], [], [], [], [], [], [], [], [], [], [], [], [], [], [], [], [], [], [], [], [], [], [], [], [], [], [], [], [], [], [], [], [], [], [], [], [], [], [], [], [], [], [], [], [], [], [], [], [], [], [], [], [], [], [], [], [], [], [], [], [], [], [], [], [], [], [], [], [], [], [], [], [], [], [], [], [], [], [], [], [], [], [], [], [], [], [], [], [], [], [], [], [], [], [], [], [], [], [], [], [], [], [], [], [], [], [], [], [], [], [], [], [], [], [], [], [], [], [], [], [], [], [], [], [], [], [], [], [], [], [], [], [], [], [], [], [], [], [], [], []], "config": "{\n  \"NovaServers.boot_and_show_server\": [\n    {\n      \"runner\": {\n        \"type\": \"rps\", \n        \"max_cpu_count\": 1, \n        \"times\": 300, \n        \"rps\": 1.4\n      }, \n      \"hooks\": [], \n      \"args\": {\n        \"image\": {\n          \"name\": \"^cirros.*-disk$\"\n        }, \n        \"flavor\": {\n          \"name\": \"m1.medium\"\n        }\n      }, \n      \"sla\": {\n        \"max_avg_duration\": 30, \n        \"failure_rate\": {\n          \"max\": 0\n        }\n      }, \n      \"context\": {\n        \"users\": {\n          \"users_per_tenant\": 1, \n          \"tenants\": 1\n        }, \n        \"quotas\": {\n          \"neutron\": {\n            \"network\": -1, \n            \"subnet\": -1, \n            \"security_group\": -1, \n            \"floatingip\": -1, \n            \"port\": -1, \n            \"security_group_rule\": -1, \n            \"router\": -1\n          }, \n          \"nova\": {\n            \"injected_files\": -1, \n            \"fixed_ips\": -1, \n            \"instances\": -1, \n            \"server_group_members\": -1, \n            \"security_group_rules\": -1, \n            \"ram\": -1, \n            \"floating_ips\": -1, \n            \"injected_file_content_bytes\": -1, \n            \"metadata_items\": -1, \n            \"key_pairs\": -1, \n            \"server_groups\": -1, \n            \"security_groups\": -1, \n            \"cores\": -1, \n            \"injected_file_path_bytes\": -1\n          }, \n          \"cinder\": {\n            \"volumes\": -1, \n            \"gigabytes\": -1, \n            \"snapshots\": -1\n          }\n        }\n      }\n    }\n  ]\n}", "sla_success": false, "output_errors": [], "cls": "NovaServers", "met": "boot_and_show_server", "has_output": false, "full_duration": 388.2648558616638, "load_profile": [["parallel iterations", [[0.0, 0], [3.2617913834095003, 2.815220091002397], [6.5235827668190005, 7.34063489716393], [9.7853741502285, 11.322542291266172], [13.047165533638001, 14.307787668262108], [16.308956917047503, 17.520739849215786], [19.570748300457, 21.290475352971157], [22.8325396838665, 24.587675823087118], [26.094331067276002, 27.316433953197517], [29.356122450685504, 30.79909122461927], [32.617913834095006, 33.86112436353785], [35.8797052175045, 37.44991617383158], [39.141496600914, 41.05542633572371], [42.403287984323505, 45.42550843383806], [45.665079367733, 49.13326557218788], [48.9268707511425, 53.26156084943222], [52.188662134552004, 57.264995987371464], [55.450453517961506, 61.86870867686419], [58.71224490137101, 66.40836558038326], [61.9740362847805, 70.98698846050485], [65.23582766819001, 74.43962367400523], [68.4976190515995, 78.10285028245836], [71.759410435009, 81.57762210381897], [75.0212018184185, 83.49771808828218], [78.282993201828, 86.63330919469462], [81.54478458523751, 90.10533573550846], [84.80657596864701, 93.61086505299744], [88.06836735205651, 96.51685765716168], [91.330158735466, 100.89720394900147], [94.5919501188755, 103.66046173690539], [97.853741502285, 108.19106631627588], [101.1155328856945, 112.47851531135514], [104.37732426910401, 116.33102254849965], [107.63911565251351, 119.6762772538444], [110.90090703592301, 123.47697083771344], [114.16269841933251, 121.87153641469948], [117.42448980274202, 120], [120.6862811861515, 120], [123.948072569561, 120], [127.20986395297051, 120], [130.47165533638002, 118.29605605971125], [133.7334467197895, 112.91253814099028], [136.995238103199, 108.56902313253161], [140.2570294866085, 108], [143.518820870018, 107.76042462453684], [146.7806122534275, 107], [150.042403636837, 106.79554083731381], [153.3041950202465, 98.67136444390795], [156.565986403656, 97.21374332586944], [159.82777778706551, 97], [163.08956917047502, 97], [166.35136055388452, 96.34589641571102], [169.61315193729402, 93.20582274128998], [172.87494332070352, 87.26220446367287], [176.13673470411302, 85.33324903080671], [179.39852608752253, 84], [182.660317470932, 84], [185.9221088543415, 82.87816945649186], [189.183900237751, 80.06022129064054], [192.4456916211605, 76.44757374934062], [195.70748300457, 74], [198.9692743879795, 74], [202.231065771389, 73.26062107913623], [205.49285715479851, 73], [208.75464853820802, 72.67772585309774], [212.01643992161752, 65.63568882860446], [215.27823130502702, 63.09727968392378], [218.54002268843652, 63], [221.80181407184602, 62.63496497516776], [225.06360545525553, 60.43393796039333], [228.32539683866503, 57], [231.58718822207453, 57], [234.84897960548403, 57], [238.1107709888935, 57], [241.372562372303, 57], [244.6343537557125, 55.27189510185793], [247.896145139122, 47.07708776932024], [251.15793652253151, 47], [254.41972790594102, 47], [257.68151928935055, 45.81099434954275], [260.94331067276005, 39.45001778314551], [264.2051020561695, 37], [267.466893439579, 37], [270.7286848229885, 36.925163890780425], [273.990476206398, 32.64909860397742], [277.2522675898075, 27.0108525901855], [280.514058973217, 27], [283.7758503566265, 27], [287.037641740036, 25.586068264927356], [290.2994331234455, 25], [293.561224506855, 23.26090462562372], [296.8230158902645, 16.523717634306827], [300.084807273674, 15], [303.3465986570835, 15], [306.608390040493, 14.856633673253882], [309.8701814239025, 10.906461561810483], [313.131972807312, 5.489024732196581], [316.3937641907215, 5], [319.65555557413103, 2.767461147151788], [322.91734695754053, 0.039215686274504696], [326.17913834095003, 0]]]], "name": "boot_and_show_server", "created_at": "2017-12-03T05:38:47", "additive_output": [], "sla": [{"criterion": "max_avg_duration", "detail": "Average duration of one iteration 128.56s <= 30.00s - Failed", "success": false}, {"criterion": "failure_rate", "detail": "Failure rate criteria 0.00% <= 0.00% <= 0.00% - Passed", "success": true}, {"criterion": "aborted_on_sla", "detail": "Task was aborted due to SLA failure(s).", "success": false}]}];

      $scope.location = {
        /* #/path/hash/sub/div */
        normalize: function(str) {
          /* Remove unwanted characters from string */
          if (typeof str !== "string") { return "" }
          return str.replace(/[^\w\-\.]/g, "")
        },
        uri: function(obj) {
          /* Getter/Setter */
          if (! obj) {
            var uri = {path: "", hash: "", sub: "", div: ""};
            var arr = ["div", "sub", "hash", "path"];
            angular.forEach($location.url().split("/"), function(value){
              var v = $scope.location.normalize(value);
              if (v) { var k = arr.pop(); if (k) { this[k] = v }}
            }, uri);
            return uri
          }
          var arr = [obj.path, obj.hash, obj.sub, obj.div], res = [];
          for (var i in arr) { if (! arr[i]) { break }; res.push(arr[i]) }
          return $location.url("/" + res.join("/"))
        },
        path: function(path, hash) {
          /* Getter/Setter */
          if (path === "") { return this.uri({}) }
          path = this.normalize(path);
          var uri = this.uri();
          if (! path) { return uri.path }
          uri.path = path;
          var _hash = this.normalize(hash);
          if (_hash || hash === "") { uri.hash = _hash }
          return this.uri(uri)
        },
        hash: function(hash) {
          /* Getter/Setter */
          if (hash) { this.uri({path:this.uri().path, hash:hash}) }
          return this.uri().hash
        }
      }

      /* Dispatch */

      $scope.route = function(uri) {
        if (! $scope.scenarios_map) { return }

        // Expand menu if there is only one menu group
        if ($scope.nav.length === 1) {
          $scope.nav_idx = $scope.nav[0].idx;
        }

        if (uri.path in $scope.scenarios_map) {
          $scope.view = {is_scenario:true};
          $scope.scenario = $scope.scenarios_map[uri.path];
          $scope.nav_idx = $scope.nav_map[uri.path];
          if ($scope.scenario.iterations.histogram.views.length) {
            $scope.mainHistogram = $scope.scenario.iterations.histogram.views[0]
          }
          if ($scope.scenario.atomic.histogram.views.length) {
            $scope.atomicHistogram = $scope.scenario.atomic.histogram.views[0]
          }
          $scope.outputIteration = 0;
          $scope.showTab(uri);
        } else {
          $scope.scenario = null;
          if (uri.path === "source") {
            $scope.view = {is_source:true}
          } else {
            $scope.view = {is_main:true}
          }
        }
      }

      $scope.$on("$locationChangeSuccess", function (event, newUrl, oldUrl) {
        $scope.route($scope.location.uri())
      });

      $scope.showNav = function(nav_idx) { $scope.nav_idx = nav_idx }

      /* Tabs */

      $scope.tabs = [
        {
          id: "overview",
          name: "Overview",
          visible: function(){ return !! $scope.scenario.iterations.pie.length }
        },{
          id: "details",
          name: "Details",
          visible: function(){ return !! $scope.scenario.atomic.pie.length }
        },{
          id: "output",
          name: "Scenario Data",
          visible: function(){ return $scope.scenario.has_output }
        },{
          id: "hooks",
          name: "Hooks",
          visible: function(){ return $scope.scenario.hooks.length }
        },{
          id: "failures",
          name: "Failures",
          visible: function(){ return !! $scope.scenario.errors.length }
        },{
          id: "task",
          name: "Input task",
          visible: function(){ return !! $scope.scenario.config }
        }
      ];
      $scope.tabs_map = {};
      angular.forEach($scope.tabs,
                      function(tab){ this[tab.id] = tab }, $scope.tabs_map);

      $scope.showTab = function(uri) {
        $scope.tab = uri.hash in $scope.tabs_map ? uri.hash : "overview";
        if (uri.hash === "output") {
          if (typeof $scope.scenario.output === "undefined") {
            var has_additive = !! $scope.scenario.additive_output.length;
            var has_complete = !! ($scope.scenario.complete_output.length
                                   && $scope.scenario.complete_output[0].length);
            $scope.scenario.output = {
              has_additive: has_additive,
              has_complete: has_complete,
              length: has_additive + has_complete,
              active: has_additive ? "additive" : (has_complete ? "complete" : "")
            }
          }
          if (uri.sub && $scope.scenario.output["has_" + uri.sub]) {
            $scope.scenario.output.active = uri.sub
          }
        }
        else if (uri.hash === "hooks") {
          if ($scope.scenario.hooks.length) {
            var hook_idx = parseInt(uri.sub);

            if (isNaN(hook_idx) || ($scope.scenario.hooks.length - hook_idx) <= 0) {
              hook_idx = 0
            }

            if ($scope.scenario.hook_idx === hook_idx) {
              return
            }

            $scope.scenario.hooks.cur = $scope.scenario.hooks[hook_idx];
            $scope.scenario.hook_idx = hook_idx;
            if (typeof $scope.scenario.hooks.cur.active === "undefined") {
              if ($scope.scenario.hooks.cur.additive.length) {
                $scope.scenario.hooks.cur.active = "additive"
              }
              if ($scope.scenario.hooks.cur.complete.length) {
                if (typeof $scope.scenario.hooks.cur.active === "undefined") {
                  $scope.scenario.hooks.cur.active = "complete"
                }
                $scope.set_hook_run()
              }
            }
          }
        }
      }

      for (var i in $scope.tabs) {
        if ($scope.tabs[i].id === $scope.location.hash()) {
          $scope.tab = $scope.tabs[i].id
        }
        $scope.tabs[i].isVisible = function() {
          if ($scope.scenario) {
            if (this.visible()) { return true }
            /* If tab should be hidden but is selected - show another one */
            if (this.id === $scope.location.hash()) {
              for (var i in $scope.tabs) {
                var tab = $scope.tabs[i];
                if (tab.id != this.id && tab.visible()) {
                  $scope.tab = tab.id;
                  return false
                }
              }
            }
          }
          return false
        }
      }

      $scope.set_hook_run = function(idx) {
        if (typeof idx !== "undefined") {
          $scope.scenario.hooks.cur.run_idx = idx
        }
        else if (typeof $scope.scenario.hooks.cur.run_idx === "undefined") {
          $scope.scenario.hooks.cur.run_idx = 0
        }
        idx = $scope.scenario.hooks.cur.run_idx;
        if (($scope.scenario.hooks.cur.complete.length - idx) > 0) {
          $scope.scenario.hooks.cur.run = $scope.scenario.hooks.cur.complete[idx]
        }
      }

      $scope.complete_hooks_as_dropdown = function() {
        return $scope.scenario.hooks.cur.complete.length > 10
      }

      /* Other helpers */

      $scope.showError = function(message) {
          return (function (e) {
            e.style.display = "block";
            e.textContent = message
          })(document.getElementById("page-error"))
      }

      $scope.compact_atomics = function() {
        return ($scope.scenario && $scope.scenario.atomic.iter.length < 9)
      }

      /* Initialization */

      angular.element(document).ready(function(){
        if (! $scope.scenarios.length) {
          return $scope.showError("No data...")
        }

        /* Compose data mapping */

        $scope.nav = [];
        $scope.nav_map = {};
        $scope.scenarios_map = {};
        var met = [], itr = 0, cls_idx = 0;
        var prev_cls, prev_met;

        for (var idx in $scope.scenarios) {
          var sc = $scope.scenarios[idx];
          if (! prev_cls) {
            prev_cls = sc.cls
          }
          else if (prev_cls !== sc.cls) {
            $scope.nav.push({cls:prev_cls, met:met, idx:cls_idx});
            prev_cls = sc.cls;
            met = [];
            itr = 1;
            cls_idx += 1
          }

          if (prev_met !== sc.met) { itr = 1 };
          sc.ref = $scope.location.normalize(sc.cls+"."+sc.met+(itr > 1 ? "-"+itr : ""));
          $scope.scenarios_map[sc.ref] = sc;
          $scope.nav_map[sc.ref] = cls_idx;
          met.push({name:sc.name, itr:itr, idx:idx, ref:sc.ref});
          prev_met = sc.met;
          itr += 1;
        }

        if (met.length) {
          $scope.nav.push({cls:prev_cls, met:met, idx:cls_idx})
        }

        /* Start */

        var uri = $scope.location.uri();
        uri.path = $scope.location.path();
        $scope.route(uri);
        $scope.$digest()
      })
    };

    if (typeof angular === "object") {
      angular.module("App", [])
        .controller("Controller", ["$scope", "$location", controllerFunction])
        .directive("widget", widgetDirective)
    }


</script>
  <style>
    body { margin:0; padding:0 0 50px; font-size:14px; font-family:Helvetica,Arial,sans-serif }
    a, a:active, a:focus, a:visited { text-decoration:none; outline:none }
    p { margin:0; padding:5px 0 }
    p.thesis { padding:10px 0 }
    h1 { color:#666; margin:0 0 20px; font-size:30px; font-weight:normal }
    h2, .h2 { color:#666; margin:24px 0 6px; font-size:25px; font-weight:normal }
    h3, .h3 { color:#777; margin:12px 0 4px; font-size:18px; font-weight:normal }
    table { border-collapse:collapse; border-spacing:0; width:100%; font-size:12px; margin:0 0 10px }
    table th { text-align:left; padding:8px; color:#000; border:2px solid #ddd; border-width:0 0 2px 0 }
    table th.sortable { cursor:pointer }
    table td { text-align:left; border-top:1px solid #ddd; padding:8px; color:#333 }
    table.compact td { padding:4px 8px }
    table.striped tr:nth-child(odd) td { background:#f9f9f9 }
    table.linked tbody tr:hover { background:#f9f9f9; cursor:pointer }
    .pointer { cursor:pointer }
    .rich, .rich td { font-weight:bold }
    .code { padding:10px; font-size:13px; color:#333; background:#f6f6f6; border:1px solid #e5e5e5; border-radius:4px }

    .header { text-align:left; background:#333; font-size:18px; padding:13px 0; margin-bottom:20px; color:#fff; background-image:linear-gradient(to bottom, #444 0px, #222 100%) }
    .header a, .header a:visited, .header a:focus { color:#999 }

    .notify-error { padding:5px 10px; background:#fee; color:red }
    .status-skip, .status-skip td { color:grey }
    .status-pass, .status-pass td { color:green }
    .status-fail, .status-fail td { color:red }
    .capitalize { text-transform:capitalize }
    
    .aside { margin:0 20px 0 0; display:block; width:255px; float:left }
    .aside > div { margin-bottom: 15px }
    .aside > div div:first-child { border-top-left-radius:4px; border-top-right-radius:4px }
    .aside > div div:last-child { border-bottom-left-radius:4px; border-bottom-right-radius:4px }
    .navcls { color:#678; background:#eee; border:1px solid #ddd; margin-bottom:-1px; display:block; padding:8px 9px; font-weight:bold; text-align:left; overflow:hidden; text-overflow:ellipsis; white-space:nowrap; cursor:pointer }
    .navcls.expanded { color:#469 }
    .navcls.active { background:#428bca; background-image:linear-gradient(to bottom, #428bca 0px, #3278b3 100%); border-color:#3278b3; color:#fff }
    .navmet { color:#555; background:#fff; border:1px solid #ddd; font-size:12px; display:block; margin-bottom:-1px; padding:8px 10px; text-align:left; text-overflow:ellipsis; white-space:nowrap; overflow:hidden; cursor:pointer }
    .navmet:hover { background:#f8f8f8 }
    .navmet.active, .navmet.active:hover { background:#428bca; background-image:linear-gradient(to bottom, #428bca 0px, #3278b3 100%); border-color:#3278b3; color:#fff }

    .buttn { color:#555; background:#fff; border:1px solid #ddd; border-radius:5px; font-size:12px; margin-bottom:-1px; padding:5px 7px; text-align:left; text-overflow:ellipsis; white-space:nowrap; overflow:hidden; cursor:pointer }
    .buttn:hover { background:#f8f8f8 }
    .buttn.active, .bttn.active:hover { background:#428bca; background-image:linear-gradient(to bottom, #428bca 0px, #3278b3 100%); border-color:#3278b3; color:#fff; cursor:default }

    .tabs { list-style:outside none none; margin:0 0 5px; padding:0; border-bottom:1px solid #ddd }
    .tabs:after { clear:both }
    .tabs li { float:left; margin-bottom:-1px; display:block; position:relative }
    .tabs li div { border:1px solid transparent; border-radius:4px 4px 0 0; line-height:20px; margin-right:2px; padding:10px 15px; color:#428bca }
    .tabs li div:hover { border-color:#eee #eee #ddd; background:#eee; cursor:pointer; }
    .tabs li.active div { background:#fff; border-color:#ddd #ddd transparent; border-style:solid; border-width:1px; color:#555; cursor:default }
    .failure-mesg { color:#900 }
    .failure-trace { color:#333; white-space:pre; overflow:auto }

    .link { color:#428BCA; padding:5px 15px 5px 5px; text-decoration:underline; cursor:pointer }
    .link.active { color:#333; text-decoration:none; cursor:default }

    .chart { padding:0; margin:0; width:890px }
    .chart svg { height:300px; padding:0; margin:0; overflow:visible; float:right }
    .chart.lower svg { height:180px }
    .chart-label-y { font-size:12px; position:relative; top:5px; padding:0; margin:0 }

    .expandable { cursor:pointer }
    .clearfix { clear:both }
    .sortable > .arrow { display:inline-block; width:12px; height:inherit; color:#c90 }
    .content-main { margin:0 5px; display:block; float:left }

    .content-wrap {  margin:0 auto; padding:0 5px;  }
    
    @media only screen and (min-width: 320px)  { .content-wrap { width:900px  } .content-main { width:600px } }
    @media only screen and (min-width: 900px)  { .content-wrap { width:880px  } .content-main { width:590px } }
    @media only screen and (min-width: 1000px) { .content-wrap { width:980px  } .content-main { width:690px } }
    @media only screen and (min-width: 1100px) { .content-wrap { width:1080px } .content-main { width:790px } }
    @media only screen and (min-width: 1200px) { .content-wrap { width:1180px } .content-main { width:890px } }

  </style>
</head>
<body ng-controller="Controller">

  <div class="header" id="page-header">
    <div class="content-wrap">
      <a href="https://github.com/openstack/rally">Rally</a>&nbsp;
      <span>task results</span>
    </div>
  </div>

  <div class="content-wrap" id="page-content">
    

    <p id="page-error" class="notify-error" style="display:none"></p>

    <div id="content-nav" class="aside" ng-show="scenarios.length" ng-cloack>
      <div>
        <div class="navcls"
             ng-class="{active:view.is_main}"
             ng-click="location.path('')">Task overview</div>
        <div class="navcls"
             ng-class="{active:view.is_source}"
             ng-click="location.path('source', '')">Input file</div>
      </div>
      <div>
        <div class="navcls" title="{{n.cls}}"
             ng-repeat-start="n in nav track by $index"
             ng-click="showNav(n.idx)"
             ng-class="{expanded:n.idx==nav_idx}">
                <span ng-hide="n.idx==nav_idx">&#9658;</span>
                <span ng-show="n.idx==nav_idx">&#9660;</span>
                {{n.cls}}</div>
        <div class="navmet" title="{{m.name}}"
             ng-show="n.idx==nav_idx"
             ng-class="{active:m.ref==scenario.ref}"
             ng-click="location.path(m.ref)"
             ng-repeat="m in n.met track by $index"
             ng-repeat-end>{{m.name}}</div>
      </div>
    </div>

    <div id="content-main" class="content-main" ng-show="scenarios.length" ng-cloak>

      <div ng-show="view.is_main">
        <h1>Task overview</h1>
        <table class="linked compact"
               ng-init="ov_srt='ref'; ov_dir=false">
          <thead>
            <tr>
              <th class="sortable"
                  title="Scenario name, with optional suffix of call number"
                  ng-click="ov_srt='ref'; ov_dir=!ov_dir">
                Scenario
                <span class="arrow">
                  <b ng-show="ov_srt=='ref' && !ov_dir">&#x25b4;</b>
                  <b ng-show="ov_srt=='ref' && ov_dir">&#x25be;</b>
                </span>
              <th class="sortable"
                  title="How long the scenario run, without context duration"
                  ng-click="ov_srt='load_duration'; ov_dir=!ov_dir">
                Load duration (s)
                <span class="arrow">
                  <b ng-show="ov_srt=='load_duration' && !ov_dir">&#x25b4;</b>
                  <b ng-show="ov_srt=='load_duration' && ov_dir">&#x25be;</b>
                </span>
              <th class="sortable"
                  title="Scenario duration plus context duration"
                  ng-click="ov_srt='full_duration'; ov_dir=!ov_dir">
                Full duration (s)
                <span class="arrow">
                  <b ng-show="ov_srt=='full_duration' && !ov_dir">&#x25b4;</b>
                  <b ng-show="ov_srt=='full_duration' && ov_dir">&#x25be;</b>
                </span>
              <th class="sortable" title="Number of iterations"
                  ng-click="ov_srt='iterations_count'; ov_dir=!ov_dir">
                Iterations
                <span class="arrow">
                  <b ng-show="ov_srt=='iterations_count' && !ov_dir">&#x25b4;</b>
                  <b ng-show="ov_srt=='iterations_count' && ov_dir">&#x25be;</b>
                </span>
              <th class="sortable" title="Scenario runner type"
                  ng-click="ov_srt='runner'; ov_dir=!ov_dir">
                Runner
                <span class="arrow">
                  <b ng-show="ov_srt=='runner' && !ov_dir">&#x25b4;</b>
                  <b ng-show="ov_srt=='runner' && ov_dir">&#x25be;</b>
                </span>
              <th class="sortable" title="Number of errors occurred"
                  ng-click="ov_srt='errors.length'; ov_dir=!ov_dir">
                Errors
                <span class="arrow">
                  <b ng-show="ov_srt=='errors.length' && !ov_dir">&#x25b4;</b>
                  <b ng-show="ov_srt=='errors.length' && ov_dir">&#x25be;</b>
                </span>
              <th class="sortable" title="Number of hooks"
                  ng-click="ov_srt='hooks.length'; ov_dir=!ov_dir">
                Hooks
                <span class="arrow">
                  <b ng-show="ov_srt=='hooks.length' && !ov_dir">&#x25b4;</b>
                  <b ng-show="ov_srt=='hooks.length' && ov_dir">&#x25be;</b>
                </span>
              <th class="sortable" title="Whether SLA check is successful"
                  ng-click="ov_srt='sla_success'; ov_dir=!ov_dir">
                Success (SLA)
                <span class="arrow">
                  <b ng-show="ov_srt=='sla_success' && !ov_dir">&#x25b4;</b>
                  <b ng-show="ov_srt=='sla_success' && ov_dir">&#x25be;</b>
                </span>
            <tr>
          </thead>
          <tbody>
            <tr ng-repeat="sc in scenarios | orderBy:ov_srt:ov_dir"
                ng-click="location.path(sc.ref)">
              <td>{{sc.ref}}
              <td>{{sc.load_duration | number:3}}
              <td>{{sc.full_duration | number:3}}
              <td>{{sc.iterations_count}}
              <td>{{sc.runner}}
              <td>{{sc.errors.length}}
              <td>{{sc.hooks.length}}
              <td>
                <span ng-show="sc.sla_success" class="status-pass">&#x2714;</span>
                <span ng-hide="sc.sla_success" class="status-fail">&#x2716;</span>
            <tr>
          </tbody>
        </table>
      </div>

      <div ng-show="view.is_source">
        <h1>Input file</h1>
        <pre class="code">{{source}}</pre>
      </div>

      <div ng-show="view.is_scenario">
        <h1>{{scenario.cls}}.<wbr>{{scenario.name}} ({{scenario.full_duration | number:3}}s)</h1>
        <ul class="tabs">
          <li ng-repeat="t in tabs"
              ng-show="t.isVisible()"
              ng-class="{active:t.id == tab}"
              ng-click="location.hash(t.id)">
            <div>{{t.name}}</div>
          </li>
          <div class="clearfix"></div>
        </ul>
        <div ng-include="tab"></div>

        <script type="text/ng-template" id="overview">
          <p class="thesis">
            Load duration: <b>{{scenario.load_duration | number:3}} s</b> &nbsp;
            Full duration: <b>{{scenario.full_duration | number:3}} s</b> &nbsp;
            Iterations: <b>{{scenario.iterations_count}}</b> &nbsp;
            Failures: <b>{{scenario.errors.length}}</b> &nbsp;
            Started at: <b>{{scenario.created_at}}</b>
          </p>

          <div ng-show="scenario.sla.length">
            <h2>Service-level agreement</h2>
            <table class="striped">
              <thead>
                <tr>
                  <th>Criterion
                  <th>Detail
                  <th>Success
                <tr>
              </thead>
              <tbody>
                <tr class="rich"
                    ng-repeat="row in scenario.sla track by $index"
                    ng-class="{'status-fail':!row.success, 'status-pass':row.success}">
                  <td>{{row.criterion}}
                  <td>{{row.detail}}
                  <td class="capitalize">{{row.success}}
                <tr>
              </tbody>
            </table>
          </div>

          <div widget="Table"
               data="scenario.table"
               lastrow-class="rich"
               title="Total durations">
          </div>

          <div widget="StackedArea"
               data="scenario.iterations.iter"
               name-x="Iteration sequence number"
               controls="true"
               guide="true">
          </div>

          <div widget="StackedArea"
               data="scenario.load_profile"
               title="Load Profile"
               title-class="h3"
               name-x="Timeline (seconds)"
               format-y="d"
               format-x=",.2f"
               class="lower">
          </div>

          <div widget="Pie"
               data="scenario.iterations.pie"
               title="Distribution"
               title-class="h3"
               style="float:left; width:40%; margin-top:15px">
          </div>

          <div widget="Histogram"
               ng-if="scenario.iterations.histogram.data.length"
               data="scenario.iterations.histogram.data[mainHistogram.id]"
               style="float:left; width:59%; margin-top:15px; position:relative; top:40px">
          </div>

          <select ng-model="mainHistogram"
                  ng-show="scenario.iterations.histogram.data.length"
                  ng-options="i.name for i in scenario.iterations.histogram.views track by i.id"
                  style="float:right; margin:45px 35px 0">
          </select>

          <div class="clearfix"></div>

        </script>

        <script type="text/ng-template" id="details">

          <div widget="StackedArea"
               data="scenario.atomic.iter"
               title="Atomic Action Durations"
               name-x="Iteration sequence number"
               controls="true"
               guide="true">
          </div>

          <div widget="Pie"
               data="scenario.atomic.pie"
               title="Distribution"
               title-class="h3"
               style="float:left; margin-top:15px"
               ng-style="compact_atomics() ? {width:'40%'} : {}">
          </div>

          <div widget="Histogram" data="scenario.atomic.histogram.data[atomicHistogram.id]"
               ng-if="scenario.atomic.histogram.data.length"
               style="float:left; position:relative; top:40px"
               ng-style="compact_atomics() ? {width:'59%', 'margin-top':'15px'} : {}">
          </div>

          <select ng-show="scenario.atomic.histogram.data.length"
                  ng-model="atomicHistogram"
                  ng-options="i.name for i in scenario.atomic.histogram.views track by i.id"
                  style="float:right; margin:45px 35px 0">
          </select>

          <div class="clearfix"></div>

        </script>

        <script type="text/ng-template" id="output">

          <div style="padding:10px 0 0">
            <span class="link"
                  ng-click="location.hash('output/additive')"
                  ng-class="{active:scenario.output.active === 'additive'}"
                  ng-if="scenario.output.has_additive">Aggregated</span>
            <span class="link"
                  ng-click="location.hash('output/complete')"
                  ng-class="{active:scenario.output.active === 'complete'}"
                  ng-if="scenario.output.has_complete">Per iteration</span>
          </div>

          <div ng-repeat="chart in scenario.additive_output"
               ng-if="scenario.output.active === 'additive'">
            <div widget="{{chart.widget}}"
                 title="{{chart.title}}"
                 description="{{chart.description}}"
                 name-x="{{chart.axis_label}}"
                 name-y="{{chart.label}}"
                 data="chart.data">
            </div>
          </div>

          <div ng-if="scenario.output.active === 'complete'" style="padding:10px 0 0">
            <select ng-model="outputIteration">
              <option ng-repeat="i in scenario.complete_output track by $index"
                      value="{{$index}}">
                Iteration {{$index}}
            </select>

            <div ng-repeat="chart in scenario.complete_output[outputIteration]">
              <div widget="{{chart.widget}}"
                   title="{{chart.title}}"
                   description="{{chart.description}}"
                   name-x="{{chart.axis_label}}"
                   name-y="{{chart.label}}"
                   data="chart.data">
              </div>
            </div>
          </div>
        </script>

        <script type="text/ng-template" id="hooks">

          <div style="padding:15px 0">
            <span ng-repeat="h in scenario.hooks track by $index"
                  class="buttn"
                  title="{{h.desc}}"
                  style="margin:0 10px 0 0"
                  ng-click="location.hash('hooks/'+$index)"
                  ng-class="{active:scenario.hook_idx===$index}">
              {{h.name}}
            </span>
          </div>

          <table class="striped" style="margin:5px 0 25px">
            <thead>
              <tr>
                <th>Plugin
                <th>Description
            </thead>
            <tbody>
              <tr>
                <td>{{scenario.hooks.cur.name}}
                <td>{{scenario.hooks.cur.desc}}
            </tbody>
          </table>

          <div>
            <span class="link"
                  ng-click="scenario.hooks.cur.active = 'additive'"
                  ng-class="{active:scenario.hooks.cur.active === 'additive'}"
                  ng-if="scenario.hooks.cur.additive.length">Aggregated</span>
            <span class="link"
                  ng-click="scenario.hooks.cur.active = 'complete'"
                  ng-class="{active:scenario.hooks.cur.active === 'complete'}"
                  ng-if="scenario.hooks.cur.complete.length">Per hook run</span>
          </div>

          <div ng-repeat="chart in scenario.hooks.cur.additive"
               ng-if="scenario.hooks.cur.active === 'additive'">
            <div widget="{{chart.widget}}"
                 title="{{chart.title}}"
                 description="{{chart.description}}"
                 name-x="{{chart.axis_label}}"
                 name-y="{{chart.label}}"
                 data="chart.data">
            </div>
          </div>

          <div ng-if="scenario.hooks.cur.active === 'complete'" style="padding:10px 0 0">

            <select ng-if="complete_hooks_as_dropdown()"
                    ng-model="scenario.hooks.cur.run_idx"
                    ng-change="set_hook_run()">
              <option ng-repeat="h in scenario.hooks.cur.complete track by $index"
                      ng-selected="scenario.hooks.cur.run_idx == $index"
                      value="{{$index}}">
                {{h.triggered_by}}
            </select>

            <div ng-if="! complete_hooks_as_dropdown()"
                 style="border:#ccc solid; border-width:1px 0 0; padding:5px 0 0">
              <span ng-repeat="h in scenario.hooks.cur.complete track by $index"
                    class="link"
                    ng-class="{active:scenario.hooks.cur.run_idx == $index}"
                    ng-click="set_hook_run($index)">
                {{h.triggered_by}}
              </span>
            </div>

            <table class="striped" style="margin:15px 0 15px">
              <thead>
                <tr>
                  <th>Status
                  <th>Triggered by
                  <th>Started at
                  <th>Finished at
              </thead>
              <tbody>
                <tr>
                  <td ng-style="scenario.hooks.cur.run.status === 'success' ? {color:'green'} : {color:'red'}">
                    <b>{{scenario.hooks.cur.run.status}}</b>
                  <td>{{scenario.hooks.cur.run.triggered_by}}
                  <td>{{scenario.hooks.cur.run.started_at}}
                  <td>{{scenario.hooks.cur.run.finished_at}}
              </tbody>
            </table>

            <div ng-repeat="chart in scenario.hooks.cur.run.charts">
              <div widget="{{chart.widget}}"
                   title="{{chart.title}}"
                   description="{{chart.description}}"
                   name-x="{{chart.axis_label}}"
                   name-y="{{chart.label}}"
                   data="chart.data">
              </div>
            </div>
          </div>
        </script>

        <script type="text/ng-template" id="failures">
          <h2>Task failures (<ng-pluralize
            count="scenario.errors.length"
            when="{'1': '1 iteration', 'other': '{} iterations'}"></ng-pluralize> failed)
          </h2>
          <table class="striped">
            <thead>
              <tr>
                <th>
                <th>Iteration
                <th>Exception type
                <th>Exception message
              </tr>
            </thead>
            <tbody>
              <tr class="expandable"
                  ng-repeat-start="i in scenario.errors track by $index"
                  ng-click="i.expanded = ! i.expanded">
                <td>
                  <span ng-hide="i.expanded">&#9658;</span>
                  <span ng-show="i.expanded">&#9660;</span>
                <td>{{i.iteration}}
                <td>{{i.type}}
                <td class="failure-mesg">{{i.message}}
              </tr>
              <tr ng-show="i.expanded" ng-repeat-end>
                <td colspan="4" class="failure-trace">{{i.traceback}}
              </tr>
            </tbody>
          </table>
        </script>

        <script type="text/ng-template" id="task">
          <h2>Subtask Configuration</h2>
          <pre class="code">{{scenario.config}}</pre>
        </script>
      </div>

    </div>
    <div class="clearfix"></div>


  </div>

  <script type="text/javascript">
    if (! window.angular) {(function(f){
      f(document.getElementById("content-nav"), "none");
      f(document.getElementById("content-main"), "none");
      f(document.getElementById("page-error"), "block").textContent = "Failed to load AngularJS framework"
    })(function(e, s){e.style.display = s; return e})}
</script>
</body>
</html>