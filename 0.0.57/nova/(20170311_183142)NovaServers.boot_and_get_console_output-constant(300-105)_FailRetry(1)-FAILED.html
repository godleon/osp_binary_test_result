<!doctype html>
<html ng-app="App">
<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <meta name="generator" content="Rally version 0.8.2~dev107">
  <title>Rally | Rally Task Report</title>
  
  
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/nvd3/1.1.15-beta/nv.d3.min.css">
  <script type="text/javascript" src="https://ajax.googleapis.com/ajax/libs/angularjs/1.3.3/angular.min.js"></script>
  <script type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/d3/3.4.13/d3.min.js"></script>
  <script type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/nvd3/1.1.15-beta/nv.d3.min.js"></script>
  

  <script type="text/javascript">
    "use strict";
    var widgetDirective = function($compile) {
  var Chart = {
    _render: function(node, data, chart, do_after){
      nv.addGraph(function() {
        d3.select(node)
          .datum(data).transition().duration(0)
          .call(chart);
        if (typeof do_after === "function") {
          do_after(node, chart)
        }
        nv.utils.windowResize(chart.update);
      })
    },
    _widgets: {
      Pie: "pie",
      StackedArea: "stack",
      Lines: "lines",
      Histogram: "histogram"
    },
    get_chart: function(widget) {
      if (widget in this._widgets) {
        var name = this._widgets[widget];
        return Chart[name]
      }
      return function() { console.log("Error: unexpected widget:", widget) }
    },
    pie: function(node, data, opts, do_after) {
      var chart = nv.models.pieChart()
        .x(function(d) { return d.key })
        .y(function(d) { return d.values })
        .showLabels(true)
        .labelType("percent")
        .donut(true)
        .donutRatio(0.25)
        .donutLabelsOutside(true)
        .color(function(d){
          if (d.data && d.data.color) { return d.data.color }
        });
      var colorizer = new Chart.colorizer("errors"), data_ = [];
      for (var i in data) {
        data_.push({key:data[i][0], values:data[i][1], color:colorizer.get_color(data[i][0])})
      }
      Chart._render(node, data_, chart)
    },
    colorizer: function(failure_key, failure_color) {
      this.failure_key = failure_key || "failed_duration";
      this.failure_color = failure_color || "#d62728";  // red
      this.color_idx = -1;
      /* NOTE(amaretskiy): this is actually a result of
         d3.scale.category20().range(), excluding red color (#d62728)
         which is reserved for errors */
      this.colors = ["#1f77b4", "#aec7e8", "#ff7f0e", "#ffbb78", "#2ca02c",
                     "#98df8a", "#ff9896", "#9467bd", "#c5b0d5", "#8c564b",
                     "#c49c94", "#e377c2", "#f7b6d2", "#7f7f7f", "#c7c7c7",
                     "#bcbd22", "#dbdb8d", "#17becf", "#9edae5"];
      this.get_color = function(key) {
        if (key === this.failure_key) {
          return this.failure_color
        }
        if (this.color_idx > (this.colors.length - 2)) {
          this.color_idx = 0
        } else {
          this.color_idx++
        }
        return this.colors[this.color_idx]
      }
    },
    stack: function(node, data, opts, do_after) {
      var chart = nv.models.stackedAreaChart()
        .x(function(d) { return d[0] })
        .y(function(d) { return d[1] })
        .useInteractiveGuideline(opts.guide)
        .showControls(opts.controls)
        .clipEdge(true);
      chart.xAxis
        .axisLabel(opts.xname)
        .tickFormat(opts.xformat)
        .showMaxMin(opts.showmaxmin);
      chart.yAxis
        .orient("left")
        .tickFormat(d3.format(opts.yformat || ",.3f"));
      var colorizer = new Chart.colorizer(), data_ = [];
      for (var i in data) {
        data_.push({key:data[i][0], values:data[i][1], color:colorizer.get_color(data[i][0])})
      }
      Chart._render(node, data_, chart, do_after);
    },
    lines: function(node, data, opts, do_after) {
      var chart = nv.models.lineChart()
        .x(function(d) { return d[0] })
        .y(function(d) { return d[1] })
        .useInteractiveGuideline(opts.guide)
        .clipEdge(true);
      chart.xAxis
        .axisLabel(opts.xname)
        .tickFormat(opts.xformat)
        .rotateLabels(opts.xrotate)
        .showMaxMin(opts.showmaxmin);
      chart.yAxis
        .orient("left")
        .tickFormat(d3.format(opts.yformat || ",.3f"));
      var colorizer = new Chart.colorizer(), data_ = [];
      for (var i in data) {
        data_.push({key:data[i][0], values:data[i][1], color:colorizer.get_color(data[i][0])})
      }
      Chart._render(node, data_, chart, do_after)
    },
    histogram: function(node, data, opts) {
      var chart = nv.models.multiBarChart()
        .reduceXTicks(true)
        .showControls(false)
        .transitionDuration(0)
        .groupSpacing(0.05);
      chart
        .legend.radioButtonMode(true);
      chart.xAxis
        .axisLabel("Duration (seconds)")
        .tickFormat(d3.format(",.2f"));
      chart.yAxis
        .axisLabel("Iterations (frequency)")
        .tickFormat(d3.format("d"));
      Chart._render(node, data, chart)
    }
  };

  return {
    restrict: "A",
    scope: { data: "=" },
    link: function(scope, element, attrs) {
      scope.$watch("data", function(data) {
        if (! data) { return console.log("Chart has no data to render!") }
        if (attrs.widget === "Table") {
          var ng_class = attrs.lastrowClass ? " ng-class='{"+attrs.lastrowClass+":$last}'" : "";
          var template = "<table class='striped'><thead>" +
            "<tr><th ng-repeat='i in data.cols track by $index'>{{i}}<tr>" +
            "</thead><tbody>" +
            "<tr" + ng_class + " ng-repeat='row in data.rows track by $index'>" +
            "<td ng-repeat='i in row track by $index'>{{i}}" +
            "<tr>" +
            "</tbody></table>";
          var el = element.empty().append($compile(template)(scope)).children()[0]
        } else if (attrs.widget === "TextArea") {
          var template = "<div style='padding:0 0 5px' ng-repeat='str in data track by $index'>{{str}}</div><div style='height:10px'></div>";
          var el = element.empty().append($compile(template)(scope)).children()[0]
        } else {

          var el_chart = element.addClass("chart").css({display:"block"});
          var el = el_chart.html("<svg></svg>").children()[0];

          var do_after = null;

          if (attrs.widget in {StackedArea:0, Lines:0}) {

            /* Hide widget if not enough data */
            if ((! data.length) || (data[0].length < 1) || (data[0][1].length < 2)) {
              return element.empty().css({display:"none"})
            }

            /* NOTE(amaretskiy): Dirty fix for changing chart width in case
               if there are too long Y values that overlaps chart box. */
            var do_after = function(node, chart){
              var g_box = angular.element(el_chart[0].querySelector(".nv-y.nv-axis"));

              if (g_box && g_box[0] && g_box[0].getBBox) {

                try {
                  // 30 is padding aroung graphs
                  var width = g_box[0].getBBox().width + 30;
                } catch (err) {
                  // This happens sometimes, just skip silently
                  return
                }

                // 890 is chart width (set by CSS)
                if (typeof width === "number" && width > 890) {
                  width = (890 * 2) - width;
                  if (width > 0) {
                    angular.element(node).css({width:width+"px"});
                    chart.update()
                  }
                }
              }
            }
          }
          else if (attrs.widget === "Pie") {
            if (! data.length) {
              return element.empty().css({display:"none"})
            }
          }

          var opts = {
            xname: attrs.nameX || "",
            xrotate: attrs.rotateX || 0,
            yformat: attrs.formatY || ",.3f",
            controls: attrs.controls === "true",
            guide: attrs.guide === "true",
            showmaxmin: attrs.showmaxmin === "true"
          };
          if (attrs.formatDateX) {
            opts.xformat = function(d) { return d3.time.format(attrs.formatDateX)(new Date(d)) }
          } else {
            opts.xformat = d3.format(attrs.formatX || "d")
          }
          Chart.get_chart(attrs.widget)(el, data, opts, do_after);
        }

        if (attrs.nameY) {
          /* NOTE(amaretskiy): Dirty fix for displaying Y-axis label correctly.
             I believe sometimes NVD3 will allow doing this in normal way */
          var label_y = angular.element("<div>").addClass("chart-label-y").text(attrs.nameY);
          angular.element(el).parent().prepend(label_y)
        }

        if (attrs.description) {
          var desc_el = angular.element("<div>").addClass(attrs.descriptionClass || "h3").text(attrs.description);
          angular.element(el).parent().prepend(desc_el)
        }

        if (attrs.title) {
          var title_el = angular.element("<div>").addClass(attrs.titleClass || "h2").text(attrs.title);
          angular.element(el).parent().prepend(title_el)
        }

        angular.element(el).parent().append(angular.element("<div style='clear:both'>"))
      });
    }
  }
};

    var controllerFunction = function($scope, $location) {
        $scope.source = "{\n  \"NovaServers.boot_and_get_console_output\": [\n    {\n      \"args\": {\n        \"flavor\": {\n          \"name\": \"m1.medium\"\n        }, \n        \"image\": {\n          \"name\": \"^cirros.*-disk$\"\n        }\n      }, \n      \"context\": {\n        \"quotas\": {\n          \"cinder\": {\n            \"gigabytes\": -1, \n            \"snapshots\": -1, \n            \"volumes\": -1\n          }, \n          \"neutron\": {\n            \"floatingip\": -1, \n            \"network\": -1, \n            \"port\": -1, \n            \"router\": -1, \n            \"security_group\": -1, \n            \"security_group_rule\": -1, \n            \"subnet\": -1\n          }, \n          \"nova\": {\n            \"cores\": -1, \n            \"fixed_ips\": -1, \n            \"floating_ips\": -1, \n            \"injected_file_content_bytes\": -1, \n            \"injected_file_path_bytes\": -1, \n            \"injected_files\": -1, \n            \"instances\": -1, \n            \"key_pairs\": -1, \n            \"metadata_items\": -1, \n            \"ram\": -1, \n            \"security_group_rules\": -1, \n            \"security_groups\": -1, \n            \"server_group_members\": -1, \n            \"server_groups\": -1\n          }\n        }, \n        \"users\": {\n          \"tenants\": 1, \n          \"users_per_tenant\": 1\n        }\n      }, \n      \"hooks\": [], \n      \"runner\": {\n        \"concurrency\": 105, \n        \"times\": 300, \n        \"type\": \"constant\"\n      }, \n      \"sla\": {\n        \"failure_rate\": {\n          \"max\": 0\n        }, \n        \"max_avg_duration\": 45\n      }\n    }\n  ]\n}";
        $scope.scenarios = [{"runner": "constant", "hooks": [], "pos": "0", "atomic": {"pie": [["nova.boot_server", 81.92167753325059], ["nova.get_console_output_server", 0.3193943007634236]], "iter": [["nova.boot_server", [[1, 51.492846965789795], [2, 43.595030069351196], [3, 96.55560398101807], [4, 43.170133113861084], [5, 17.065424919128418], [6, 64.40815806388855], [7, 16.40140700340271], [8, 96.05770516395569], [9, 97.17489886283875], [10, 16.8438241481781], [11, 25.073215007781982], [12, 23.738665103912354], [13, 28.69825315475464], [14, 107.71461296081543], [15, 13.380505800247192], [16, 26.19150996208191], [17, 25.549866914749146], [18, 96.98444104194641], [19, 25.21391010284424], [20, 33.000596046447754], [21, 107.97990989685059], [22, 35.6809868812561], [23, 26.08232808113098], [24, 39.932876110076904], [25, 22.58984684944153], [26, 107.65230011940002], [27, 25.309466123580933], [28, 96.41930603981018], [29, 107.66941809654236], [30, 55.39547801017761], [31, 29.099075078964233], [32, 43.02137804031372], [33, 52.647666931152344], [34, 13.209569931030273], [35, 96.12115788459778], [36, 35.08010196685791], [37, 13.436296939849854], [38, 24.916884899139404], [39, 96.33481788635254], [40, 125.18509411811829], [41, 38.04451608657837], [42, 25.05937695503235], [43, 13.450382947921753], [44, 25.304182052612305], [45, 44.10162019729614], [46, 33.02503204345703], [47, 25.792658805847168], [48, 96.42287492752075], [49, 96.19648313522339], [50, 53.06958603858948], [51, 43.518771171569824], [52, 39.58791923522949], [53, 122.20644688606262], [54, 117.76589798927307], [55, 51.428955078125], [56, 16.52942204475403], [57, 121.88670587539673], [58, 17.159821033477783], [59, 52.407464027404785], [60, 111.28798198699951], [61, 121.60363006591797], [62, 25.207356929779053], [63, 117.71165609359741], [64, 39.73063802719116], [65, 26.65650200843811], [66, 25.43513298034668], [67, 51.07286095619202], [68, 110.64971899986267], [69, 39.42117786407471], [70, 122.43932485580444], [71, 121.73293805122375], [72, 68.56268000602722], [73, 21.595102071762085], [74, 122.36159706115723], [75, 50.48592805862427], [76, 54.51384401321411], [77, 55.054003953933716], [78, 40.33131289482117], [79, 122.03433513641357], [80, 22.984396934509277], [81, 54.82699108123779], [82, 32.208081007003784], [83, 42.798145055770874], [84, 108.11188197135925], [85, 97.15766906738281], [86, 48.24247407913208], [87, 121.28698992729187], [88, 29.15731692314148], [89, 67.84761905670166], [90, 39.518916845321655], [91, 108.46827912330627], [92, 39.177103996276855], [93, 135.24021983146667], [94, 29.316888093948364], [95, 39.155895948410034], [96, 125.90962195396423], [97, 110.27507090568542], [98, 47.0764319896698], [99, 38.888039112091064], [100, 34.16655421257019], [101, 17.756651878356934], [102, 51.801608085632324], [103, 40.759413957595825], [104, 42.7062349319458], [105, 110.7920241355896], [106, 40.158223152160645], [107, 37.13707399368286], [108, 39.67271900177002], [109, 38.87221312522888], [110, 51.349928855895996], [111, 52.17133593559265], [112, 117.57037281990051], [113, 46.771876096725464], [114, 117.11801481246948], [115, 116.26569199562073], [116, 46.39765691757202], [117, 46.27630305290222], [118, 44.615166902542114], [119, 44.39705014228821], [120, 109.10333919525146], [121, 108.50528693199158], [122, 120.70822501182556], [123, 109.1286768913269], [124, 108.75853395462036], [125, 111.67746806144714], [126, 123.42093110084534], [127, 112.2218120098114], [128, 120.11420202255249], [129, 119.85460901260376], [130, 123.23631596565247], [131, 119.48772096633911], [132, 121.78688406944275], [133, 117.82485890388489], [134, 120.27023220062256], [135, 41.57342004776001], [136, 42.130802154541016], [137, 43.39647603034973], [138, 116.07605981826782], [139, 126.09896802902222], [140, 124.30199718475342], [141, 127.38414096832275], [142, 127.27260208129883], [143, 120.0138349533081], [144, 124.05670094490051], [145, 123.39244318008423], [146, 123.25652623176575], [147, 123.21253490447998], [148, 123.02635216712952], [149, 127.89048099517822], [150, 127.44309616088867], [151, 128.2901918888092], [152, 135.8483681678772], [153, 136.12928295135498], [154, 133.7810399532318], [155, 138.40834188461304], [156, 132.96099400520325], [157, 134.34717297554016], [158, 138.74105715751648], [159, 133.61456894874573], [160, 137.4995059967041], [161, 134.5110821723938], [162, 143.2637300491333], [163, 140.38069701194763], [164, 140.20403909683228], [165, 140.64946007728577], [166, 145.43508386611938], [167, 145.3670449256897], [168, 144.3991949558258], [169, 144.14730596542358], [170, 143.86527299880981], [171, 143.16155314445496], [172, 155.36495685577393], [173, 147.69900608062744], [174, 154.96601700782776], [175, 153.8514289855957], [176, 162.1964828968048], [177, 162.1808340549469], [178, 161.2963900566101], [179, 153.44688987731934], [180, 153.18177485466003], [181, 154.82462286949158], [182, 148.9924669265747], [183, 148.8641860485077], [184, 153.94533896446228], [185, 153.8309669494629], [186, 166.0760040283203], [187, 166.63832688331604], [188, 165.69127297401428], [189, 163.02708101272583], [190, 157.18228888511658], [191, 10.356795072555542], [192, 10.91690993309021], [193, 12.74696397781372], [194, 13.309576034545898], [195, 12.51586103439331], [196, 12.635178804397583], [197, 11.792064905166626], [198, 13.864081144332886], [199, 13.215837001800537], [200, 138.34051299095154], [201, 12.083526849746704], [202, 138.47966313362122], [203, 137.7713108062744], [204, 11.610856056213379], [205, 11.863497972488403], [206, 12.393433094024658], [207, 12.392614841461182], [208, 11.20883297920227]]], ["nova.get_console_output_server", [[1, 0.24242782592773438], [2, 0.2950420379638672], [3, 0.21632695198059082], [4, 0.6870160102844238], [5, 0.2678539752960205], [6, 0.20827984809875488], [7, 0.23569893836975098], [8, 0.44132184982299805], [9, 0.22114300727844238], [10, 0.2560238838195801], [11, 0.22275114059448242], [12, 0.2283649444580078], [13, 0.23738503456115723], [14, 0.2379469871520996], [15, 0.5105278491973877], [16, 0.2654380798339844], [17, 0.2336280345916748], [18, 0.2556600570678711], [19, 0.22713112831115723], [20, 0.5171740055084229], [21, 0.19831299781799316], [22, 0.27817797660827637], [23, 0.25339698791503906], [24, 0.28000402450561523], [25, 0.2084810733795166], [26, 0.25530099868774414], [27, 0.29405999183654785], [28, 0.19374990463256836], [29, 0.2407369613647461], [30, 0.685175895690918], [31, 0.30997300148010254], [32, 0.8012950420379639], [33, 0.8112349510192871], [34, 1.0569031238555908], [35, 0.2622830867767334], [36, 0.23984599113464355], [37, 0.7028031349182129], [38, 0.22115588188171387], [39, 0.21813297271728516], [40, 0.32648587226867676], [41, 0.28453803062438965], [42, 0.2221682071685791], [43, 0.7156519889831543], [44, 0.24469995498657227], [45, 0.4534609317779541], [46, 0.3207998275756836], [47, 0.4094710350036621], [48, 0.20143508911132812], [49, 0.24824905395507812], [50, 0.5301549434661865], [51, 0.3214380741119385], [52, 0.4884030818939209], [53, 0.24977517127990723], [54, 0.2484428882598877], [55, 0.5092589855194092], [56, 0.23426008224487305], [57, 0.20385503768920898], [58, 0.2538449764251709], [59, 0.29457902908325195], [60, 0.5379858016967773], [61, 0.20471811294555664], [62, 0.24128508567810059], [63, 0.2583930492401123], [64, 0.26772189140319824], [65, 1.0518789291381836], [66, 0.2081141471862793], [67, 0.22466421127319336], [68, 0.2948329448699951], [69, 0.23414206504821777], [70, 0.21548700332641602], [71, 0.24372291564941406], [72, 0.2063288688659668], [73, 0.2658510208129883], [74, 0.21892213821411133], [75, 0.22150516510009766], [76, 0.22472500801086426], [77, 0.24594998359680176], [78, 1.2425930500030518], [79, 0.25578999519348145], [80, 0.5171680450439453], [81, 0.22780203819274902], [82, 0.21184802055358887], [83, 0.6898119449615479], [84, 0.4783048629760742], [85, 0.24797391891479492], [86, 0.2167069911956787], [87, 0.22446894645690918], [88, 0.6486690044403076], [89, 0.2862532138824463], [90, 0.25430893898010254], [91, 0.5739281177520752], [92, 0.35808682441711426], [93, 0.8042640686035156], [94, 0.5419309139251709], [95, 0.3426961898803711], [96, 0.3476588726043701], [97, 0.2690720558166504], [98, 0.2148280143737793], [99, 0.24544787406921387], [100, 0.2969789505004883], [101, 0.5545392036437988], [102, 0.23002290725708008], [103, 0.7801668643951416], [104, 0.257274866104126], [105, 0.4754979610443115], [106, 0.23023509979248047], [107, 0.25623607635498047], [108, 0.24638700485229492], [109, 0.23076391220092773], [110, 0.24052786827087402], [111, 0.21506190299987793], [112, 0.7572231292724609], [113, 0.2131340503692627], [114, 0.2527949810028076], [115, 0.24312281608581543], [116, 0.24538898468017578], [117, 0.20877504348754883], [118, 0.21561503410339355], [119, 0.23372912406921387], [120, 0.21862196922302246], [121, 0.25524306297302246], [122, 0.28730106353759766], [123, 0.20322608947753906], [124, 0.20981502532958984], [125, 0.3338639736175537], [126, 0.3189070224761963], [127, 0.2407221794128418], [128, 0.2696399688720703], [129, 0.24250411987304688], [130, 0.30001115798950195], [131, 0.22614002227783203], [132, 0.22683286666870117], [133, 0.6248428821563721], [134, 0.27762293815612793], [135, 0.2161099910736084], [136, 0.21929407119750977], [137, 0.46891093254089355], [138, 0.25220799446105957], [139, 0.24254417419433594], [140, 0.2358720302581787], [141, 0.2209019660949707], [142, 0.33092212677001953], [143, 0.22224903106689453], [144, 0.21929192543029785], [145, 0.22090792655944824], [146, 0.2351381778717041], [147, 0.20886898040771484], [148, 0.46636390686035156], [149, 0.5750930309295654], [150, 0.2802269458770752], [151, 0.2893099784851074], [152, 0.28078484535217285], [153, 0.23235797882080078], [154, 0.34907102584838867], [155, 0.253324031829834], [156, 0.3897380828857422], [157, 0.975438117980957], [158, 0.5360231399536133], [159, 0.2192981243133545], [160, 0.22521185874938965], [161, 0.25573301315307617], [162, 0.30130887031555176], [163, 0.23233604431152344], [164, 0.2099590301513672], [165, 0.3282449245452881], [166, 0.23724818229675293], [167, 0.20896220207214355], [168, 0.23122119903564453], [169, 0.2508249282836914], [170, 0.25119805335998535], [171, 0.23013997077941895], [172, 0.3959228992462158], [173, 0.2276611328125], [174, 0.24274277687072754], [175, 0.44161510467529297], [176, 0.2733161449432373], [177, 0.22232389450073242], [178, 0.20529580116271973], [179, 0.20859694480895996], [180, 0.21187996864318848], [181, 0.21558094024658203], [182, 0.24360299110412598], [183, 0.32999300956726074], [184, 0.25942492485046387], [185, 0.2552452087402344], [186, 0.2627599239349365], [187, 0.21048617362976074], [188, 0.21275711059570312], [189, 0.2207479476928711], [190, 0.222944974899292], [191, 0.21051907539367676], [192, 0.26109814643859863], [193, 0.5545611381530762], [194, 0.2701129913330078], [195, 0.23129701614379883], [196, 0.2177889347076416], [197, 0.39978694915771484], [198, 0.265470027923584], [199, 0.2540469169616699], [200, 0.23159289360046387], [201, 0.20380711555480957], [202, 0.39382290840148926], [203, 0.2203531265258789], [204, 0.22035908699035645], [205, 0.2274949550628662], [206, 0.2274150848388672], [207, 0.20810413360595703], [208, 0.4071011543273926]]]], "histogram": {"data": [[{"disabled": 0, "values": [{"y": 25, "x": 20.775563859939574}, {"y": 21, "x": 31.19433264732361}, {"y": 22, "x": 41.613101434707644}, {"y": 22, "x": 52.031870222091676}, {"y": 8, "x": 62.45063900947571}, {"y": 3, "x": 72.86940779685975}, {"y": 0, "x": 83.28817658424377}, {"y": 0, "x": 93.70694537162781}, {"y": 10, "x": 104.12571415901185}, {"y": 16, "x": 114.54448294639587}, {"y": 30, "x": 124.96325173377991}, {"y": 14, "x": 135.38202052116395}, {"y": 18, "x": 145.800789308548}, {"y": 11, "x": 156.219558095932}, {"y": 8, "x": 166.63832688331604}], "key": "nova.boot_server", "view": "Square Root Choice"}, {"disabled": 1, "values": [{"y": 128, "x": 0.2636727809906006}, {"y": 33, "x": 0.33359565734863283}, {"y": 9, "x": 0.403518533706665}, {"y": 7, "x": 0.47344141006469725}, {"y": 11, "x": 0.5433642864227295}, {"y": 4, "x": 0.6132871627807617}, {"y": 2, "x": 0.6832100391387939}, {"y": 5, "x": 0.7531329154968261}, {"y": 5, "x": 0.8230557918548583}, {"y": 0, "x": 0.8929786682128906}, {"y": 0, "x": 0.9629015445709228}, {"y": 1, "x": 1.032824420928955}, {"y": 2, "x": 1.1027472972869874}, {"y": 0, "x": 1.1726701736450194}, {"y": 1, "x": 1.2425930500030518}], "key": "nova.get_console_output_server", "view": "Square Root Choice"}], [{"disabled": 0, "values": [{"y": 42, "x": 27.7214097181956}, {"y": 37, "x": 45.086024363835655}, {"y": 19, "x": 62.45063900947571}, {"y": 3, "x": 79.81525365511577}, {"y": 10, "x": 97.17986830075583}, {"y": 16, "x": 114.54448294639587}, {"y": 38, "x": 131.90909759203595}, {"y": 27, "x": 149.273712237676}, {"y": 16, "x": 166.63832688331604}], "key": "nova.boot_server", "view": "Sturges Formula"}, {"disabled": 1, "values": [{"y": 154, "x": 0.3102880318959554}, {"y": 18, "x": 0.4268261591593424}, {"y": 16, "x": 0.5433642864227295}, {"y": 6, "x": 0.6599024136861165}, {"y": 6, "x": 0.7764405409495035}, {"y": 4, "x": 0.8929786682128906}, {"y": 1, "x": 1.0095167954762776}, {"y": 2, "x": 1.1260549227396646}, {"y": 1, "x": 1.2425930500030518}], "key": "nova.get_console_output_server", "view": "Sturges Formula"}], [{"disabled": 0, "values": [{"y": 28, "x": 23.380256056785583}, {"y": 24, "x": 36.403717041015625}, {"y": 32, "x": 49.42717802524567}, {"y": 14, "x": 62.45063900947571}, {"y": 3, "x": 75.47409999370575}, {"y": 0, "x": 88.49756097793579}, {"y": 10, "x": 101.52102196216583}, {"y": 16, "x": 114.54448294639587}, {"y": 36, "x": 127.56794393062592}, {"y": 18, "x": 140.59140491485596}, {"y": 13, "x": 153.614865899086}, {"y": 14, "x": 166.63832688331604}], "key": "nova.boot_server", "view": "Rice Rule"}, {"disabled": 1, "values": [{"y": 142, "x": 0.28115350008010864}, {"y": 24, "x": 0.3685570955276489}, {"y": 9, "x": 0.4559606909751892}, {"y": 13, "x": 0.5433642864227295}, {"y": 5, "x": 0.6307678818702698}, {"y": 6, "x": 0.7181714773178101}, {"y": 4, "x": 0.8055750727653503}, {"y": 1, "x": 0.8929786682128906}, {"y": 1, "x": 0.9803822636604309}, {"y": 2, "x": 1.0677858591079712}, {"y": 0, "x": 1.1551894545555115}, {"y": 1, "x": 1.2425930500030518}], "key": "nova.get_console_output_server", "view": "Rice Rule"}]], "views": [{"id": 0, "name": "Square Root Choice"}, {"id": 1, "name": "Sturges Formula"}, {"id": 2, "name": "Rice Rule"}]}}, "iterations": {"pie": [["success", 208], ["errors", 0]], "iter": [["duration", [[1, 50.73561882972717], [2, 42.89040517807007], [3, 95.77213382720947], [4, 42.85765099525452], [5, 16.33340311050415], [6, 63.61657094955444], [7, 15.637211084365845], [8, 95.49924087524414], [9, 96.39627504348755], [10, 16.09996795654297], [11, 24.296096801757812], [12, 22.96719193458557], [13, 27.935796976089478], [14, 106.95276999473572], [15, 12.891162157058716], [16, 25.457074880599976], [17, 24.78366208076477], [18, 96.24027395248413], [19, 24.441154956817627], [20, 32.5179238319397], [21, 107.18155789375305], [22, 34.95928883552551], [23, 25.335886001586914], [24, 39.21305012702942], [25, 21.798431158065796], [26, 106.90772294998169], [27, 24.603645086288452], [28, 95.61329388618469], [29, 106.91031789779663], [30, 55.08094501495361], [31, 28.40917205810547], [32, 42.82299208641052], [33, 52.45914101600647], [34, 13.26660704612732], [35, 95.38374304771423], [36, 34.32010293006897], [37, 13.1393141746521], [38, 24.138180017471313], [39, 95.55331897735596], [40, 124.5117781162262], [41, 37.329214096069336], [42, 24.281700134277344], [43, 13.166162014007568], [44, 24.54897117614746], [45, 43.55542778968811], [46, 32.34595203399658], [47, 25.202222108840942], [48, 95.62469506263733], [49, 95.44502091407776], [50, 52.599947929382324], [51, 42.84037899971008], [52, 39.07645297050476], [53, 121.45633602142334], [54, 117.01459789276123], [55, 50.93855595588684], [56, 15.763849020004272], [57, 121.09073400497437], [58, 16.41376304626465], [59, 51.70221519470215], [60, 110.82695007324219], [61, 120.80847597122192], [62, 24.448807954788208], [63, 116.97024989128113], [64, 38.99845290184021], [65, 26.708531141281128], [66, 24.643342971801758], [67, 50.297698974609375], [68, 109.9447500705719], [69, 38.655410051345825], [70, 121.65498995780945], [71, 120.97691607475281], [72, 67.76928496360779], [73, 20.861100912094116], [74, 121.58064007759094], [75, 49.7076518535614], [76, 53.73949885368347], [77, 54.30023384094238], [78, 40.57403206825256], [79, 121.29036593437195], [80, 22.50166916847229], [81, 54.0551118850708], [82, 31.420037984848022], [83, 42.48809194564819], [84, 107.59032392501831], [85, 96.40579891204834], [86, 47.45947194099426], [87, 120.51155805587769], [88, 28.8060941696167], [89, 67.13424801826477], [90, 38.77334403991699], [91, 108.04250693321228], [92, 38.535287857055664], [93, 135.0446481704712], [94, 28.858976125717163], [95, 38.498694896698], [96, 125.25751614570618], [97, 109.54435706138611], [98, 46.291505098342896], [99, 38.13357090950012], [100, 33.46364903450012], [101, 17.31129503250122], [102, 51.03172492980957], [103, 40.539726972579956], [104, 41.963603019714355], [105, 110.26770377159119], [106, 39.38860893249512], [107, 36.393659830093384], [108, 38.919440031051636], [109, 38.103184938430786], [110, 50.59066915512085], [111, 51.386677980422974], [112, 117.32777690887451], [113, 45.98514103889465], [114, 116.37108898162842], [115, 115.50894594192505], [116, 45.643218994140625], [117, 45.48527693748474], [118, 43.83092498779297], [119, 43.63092589378357], [120, 108.32218313217163], [121, 107.76067686080933], [122, 119.99572205543518], [123, 108.3320369720459], [124, 107.96849393844604], [125, 111.01147103309631], [126, 122.73997092247009], [127, 111.46267986297607], [128, 119.38399004936218], [129, 119.09733486175537], [130, 122.5364420413971], [131, 118.71396994590759], [132, 121.01401710510254], [133, 117.44985795021057], [134, 119.54798603057861], [135, 40.78968000411987], [136, 41.350358963012695], [137, 42.86563205718994], [138, 115.32840013504028], [139, 125.34170508384705], [140, 123.53807091712952], [141, 126.60522079467773], [142, 126.60369396209717], [143, 119.23626613616943], [144, 123.27619194984436], [145, 122.61348509788513], [146, 122.49190497398376], [147, 122.42152190208435], [148, 122.49286699295044], [149, 127.46576499938965], [150, 126.72346591949463], [151, 127.5796229839325], [152, 135.12928104400635], [153, 135.3618290424347], [154, 133.13023591041565], [155, 137.66183710098267], [156, 132.35099291801453], [157, 134.3228030204773], [158, 138.27734804153442], [159, 132.83446502685547], [160, 136.7248411178589], [161, 133.76699090003967], [162, 142.56520795822144], [163, 139.61314606666565], [164, 139.41416192054749], [165, 139.97783493995667], [166, 144.67247986793518], [167, 144.57611107826233], [168, 143.63051795959473], [169, 143.3983130455017], [170, 143.11659002304077], [171, 142.39180898666382], [172, 154.76099395751953], [173, 146.92678594589233], [174, 154.20887684822083], [175, 153.29322004318237], [176, 161.4699010848999], [177, 161.40332508087158], [178, 160.501788854599], [179, 152.65560483932495], [180, 152.39377903938293], [181, 154.04038000106812], [182, 148.23616099357605], [183, 148.1942720413208], [184, 153.2048680782318], [185, 153.08632516860962], [186, 165.3388741016388], [187, 165.84892296791077], [188, 164.90413188934326], [189, 162.2479648590088], [190, 156.40589499473572], [191, 9.567433834075928], [192, 10.17810606956482], [193, 12.301637887954712], [194, 12.579787015914917], [195, 11.747274160385132], [196, 11.85307502746582], [197, 11.191967964172363], [198, 13.129650115966797], [199, 12.470010995864868], [200, 137.5721960067749], [201, 11.287444114685059], [202, 137.87359714508057], [203, 136.99176478385925], [204, 10.831318855285645], [205, 11.091104984283447], [206, 11.621028900146484], [207, 11.600818872451782], [208, 10.616613864898682]]], ["idle_duration", [[1, 1.0], [2, 1.0], [3, 1.0], [4, 1.0], [5, 1.0], [6, 1.0], [7, 1.0], [8, 1.0], [9, 1.0], [10, 1.0], [11, 1.0], [12, 1.0], [13, 1.0], [14, 1.0], [15, 1.0], [16, 1.0], [17, 1.0], [18, 1.0], [19, 1.0], [20, 1.0], [21, 1.0], [22, 1.0], [23, 1.0], [24, 1.0], [25, 1.0], [26, 1.0], [27, 1.0], [28, 1.0], [29, 1.0], [30, 1.0], [31, 1.0], [32, 1.0], [33, 1.0], [34, 1.0], [35, 1.0], [36, 1.0], [37, 1.0], [38, 1.0], [39, 1.0], [40, 1.0], [41, 1.0], [42, 1.0], [43, 1.0], [44, 1.0], [45, 1.0], [46, 1.0], [47, 1.0], [48, 1.0], [49, 1.0], [50, 1.0], [51, 1.0], [52, 1.0], [53, 1.0], [54, 1.0], [55, 1.0], [56, 1.0], [57, 1.0], [58, 1.0], [59, 1.0], [60, 1.0], [61, 1.0], [62, 1.0], [63, 1.0], [64, 1.0], [65, 1.0], [66, 1.0], [67, 1.0], [68, 1.0], [69, 1.0], [70, 1.0], [71, 1.0], [72, 1.0], [73, 1.0], [74, 1.0], [75, 1.0], [76, 1.0], [77, 1.0], [78, 1.0], [79, 1.0], [80, 1.0], [81, 1.0], [82, 1.0], [83, 1.0], [84, 1.0], [85, 1.0], [86, 1.0], [87, 1.0], [88, 1.0], [89, 1.0], [90, 1.0], [91, 1.0], [92, 1.0], [93, 1.0], [94, 1.0], [95, 1.0], [96, 1.0], [97, 1.0], [98, 1.0], [99, 1.0], [100, 1.0], [101, 1.0], [102, 1.0], [103, 1.0], [104, 1.0], [105, 1.0], [106, 1.0], [107, 1.0], [108, 1.0], [109, 1.0], [110, 1.0], [111, 1.0], [112, 1.0], [113, 1.0], [114, 1.0], [115, 1.0], [116, 1.0], [117, 1.0], [118, 1.0], [119, 1.0], [120, 1.0], [121, 1.0], [122, 1.0], [123, 1.0], [124, 1.0], [125, 1.0], [126, 1.0], [127, 1.0], [128, 1.0], [129, 1.0], [130, 1.0], [131, 1.0], [132, 1.0], [133, 1.0], [134, 1.0], [135, 1.0], [136, 1.0], [137, 1.0], [138, 1.0], [139, 1.0], [140, 1.0], [141, 1.0], [142, 1.0], [143, 1.0], [144, 1.0], [145, 1.0], [146, 1.0], [147, 1.0], [148, 1.0], [149, 1.0], [150, 1.0], [151, 1.0], [152, 1.0], [153, 1.0], [154, 1.0], [155, 1.0], [156, 1.0], [157, 1.0], [158, 1.0], [159, 1.0], [160, 1.0], [161, 1.0], [162, 1.0], [163, 1.0], [164, 1.0], [165, 1.0], [166, 1.0], [167, 1.0], [168, 1.0], [169, 1.0], [170, 1.0], [171, 1.0], [172, 1.0], [173, 1.0], [174, 1.0], [175, 1.0], [176, 1.0], [177, 1.0], [178, 1.0], [179, 1.0], [180, 1.0], [181, 1.0], [182, 1.0], [183, 1.0], [184, 1.0], [185, 1.0], [186, 1.0], [187, 1.0], [188, 1.0], [189, 1.0], [190, 1.0], [191, 1.0], [192, 1.0], [193, 1.0], [194, 1.0], [195, 1.0], [196, 1.0], [197, 1.0], [198, 1.0], [199, 1.0], [200, 1.0], [201, 1.0], [202, 1.0], [203, 1.0], [204, 1.0], [205, 1.0], [206, 1.0], [207, 1.0], [208, 1.0]]]], "histogram": {"data": [[{"disabled": null, "values": [{"y": 25, "x": 19.98619977633158}, {"y": 21, "x": 30.40496571858724}, {"y": 22, "x": 40.823731660842896}, {"y": 22, "x": 51.24249760309855}, {"y": 8, "x": 61.6612635453542}, {"y": 3, "x": 72.08002948760986}, {"y": 0, "x": 82.49879542986551}, {"y": 0, "x": 92.91756137212117}, {"y": 10, "x": 103.33632731437683}, {"y": 16, "x": 113.75509325663248}, {"y": 30, "x": 124.17385919888814}, {"y": 13, "x": 134.5926251411438}, {"y": 19, "x": 145.01139108339945}, {"y": 11, "x": 155.4301570256551}, {"y": 8, "x": 165.84892296791077}], "key": "task", "view": "Square Root Choice"}], [{"disabled": null, "values": [{"y": 42, "x": 26.932043737835354}, {"y": 37, "x": 44.29665364159478}, {"y": 19, "x": 61.6612635453542}, {"y": 3, "x": 79.02587344911363}, {"y": 8, "x": 96.39048335287306}, {"y": 18, "x": 113.75509325663248}, {"y": 38, "x": 131.1197031603919}, {"y": 27, "x": 148.48431306415134}, {"y": 16, "x": 165.84892296791077}], "key": "task", "view": "Sturges Formula"}], [{"disabled": null, "values": [{"y": 28, "x": 22.5908912618955}, {"y": 24, "x": 35.61434868971507}, {"y": 32, "x": 48.63780611753464}, {"y": 14, "x": 61.66126354535421}, {"y": 3, "x": 74.68472097317378}, {"y": 0, "x": 87.70817840099335}, {"y": 10, "x": 100.73163582881293}, {"y": 16, "x": 113.75509325663249}, {"y": 36, "x": 126.77855068445206}, {"y": 18, "x": 139.80200811227164}, {"y": 13, "x": 152.82546554009122}, {"y": 14, "x": 165.84892296791077}], "key": "task", "view": "Rice Rule"}]], "views": [{"id": 0, "name": "Square Root Choice"}, {"id": 1, "name": "Sturges Formula"}, {"id": 2, "name": "Rice Rule"}]}}, "table": {"rows": [["nova.boot_server", 10.357, 96.266, 144.69, 154.517, 166.638, 81.922, "100.0%", 208], ["nova.get_console_output_server", 0.194, 0.249, 0.539, 0.698, 1.243, 0.319, "100.0%", 208], ["total", 9.567, 95.526, 143.914, 153.779, 165.849, 81.241, "100.0%", 208]], "cols": ["Action", "Min (sec)", "Median (sec)", "90%ile (sec)", "95%ile (sec)", "Max (sec)", "Avg (sec)", "Success", "Count"]}, "errors": [], "iterations_count": 208, "load_duration": 235.38441395759583, "complete_output": [[], [], [], [], [], [], [], [], [], [], [], [], [], [], [], [], [], [], [], [], [], [], [], [], [], [], [], [], [], [], [], [], [], [], [], [], [], [], [], [], [], [], [], [], [], [], [], [], [], [], [], [], [], [], [], [], [], [], [], [], [], [], [], [], [], [], [], [], [], [], [], [], [], [], [], [], [], [], [], [], [], [], [], [], [], [], [], [], [], [], [], [], [], [], [], [], [], [], [], [], [], [], [], [], [], [], [], [], [], [], [], [], [], [], [], [], [], [], [], [], [], [], [], [], [], [], [], [], [], [], [], [], [], [], [], [], [], [], [], [], [], [], [], [], [], [], [], [], [], [], [], [], [], [], [], [], [], [], [], [], [], [], [], [], [], [], [], [], [], [], [], [], [], [], [], [], [], [], [], [], [], [], [], [], [], [], [], [], [], [], [], [], [], [], [], [], [], [], [], [], [], [], [], [], [], [], [], []], "config": "{\n  \"NovaServers.boot_and_get_console_output\": [\n    {\n      \"runner\": {\n        \"type\": \"constant\", \n        \"times\": 300, \n        \"concurrency\": 105\n      }, \n      \"hooks\": [], \n      \"args\": {\n        \"image\": {\n          \"name\": \"^cirros.*-disk$\"\n        }, \n        \"flavor\": {\n          \"name\": \"m1.medium\"\n        }\n      }, \n      \"sla\": {\n        \"max_avg_duration\": 45, \n        \"failure_rate\": {\n          \"max\": 0\n        }\n      }, \n      \"context\": {\n        \"users\": {\n          \"users_per_tenant\": 1, \n          \"tenants\": 1\n        }, \n        \"quotas\": {\n          \"neutron\": {\n            \"network\": -1, \n            \"subnet\": -1, \n            \"security_group\": -1, \n            \"floatingip\": -1, \n            \"port\": -1, \n            \"security_group_rule\": -1, \n            \"router\": -1\n          }, \n          \"nova\": {\n            \"injected_files\": -1, \n            \"fixed_ips\": -1, \n            \"instances\": -1, \n            \"server_group_members\": -1, \n            \"security_group_rules\": -1, \n            \"ram\": -1, \n            \"floating_ips\": -1, \n            \"injected_file_content_bytes\": -1, \n            \"metadata_items\": -1, \n            \"key_pairs\": -1, \n            \"server_groups\": -1, \n            \"security_groups\": -1, \n            \"cores\": -1, \n            \"injected_file_path_bytes\": -1\n          }, \n          \"cinder\": {\n            \"volumes\": -1, \n            \"gigabytes\": -1, \n            \"snapshots\": -1\n          }\n        }\n      }\n    }\n  ]\n}", "sla_success": false, "output_errors": [], "cls": "NovaServers", "met": "boot_and_get_console_output", "has_output": false, "full_duration": 290.3678939342499, "load_profile": [["parallel iterations", [[0.0, 0], [2.4009210223674775, 102.3092544554329], [4.801842044734955, 105], [7.202763067102433, 105], [9.60368408946991, 105], [12.004605111837387, 105], [14.405526134204866, 103.32642427117004], [16.806447156572343, 103.55444690607976], [19.20736817893982, 103.93533021297839], [21.608289201307297, 104.72386289642557], [24.009210223674774, 103.60292204311764], [26.41013124604225, 100.01077080816562], [28.811052268409732, 104.04302342979453], [31.21197329077721, 103.83481708213762], [33.612894313144686, 103.7313774903809], [36.01381533551216, 103.75873686155042], [38.41473635787964, 104.51272517454052], [40.81565738024712, 101.59481026235466], [43.216578402614594, 103.0444510879241], [45.61749942498207, 103.31111952940486], [48.01842044734955, 104.38979479629494], [50.419341469717025, 104.49268435766061], [52.8202624920845, 101.97224287423528], [55.22118351445198, 102.05099484363016], [57.622104536819464, 104.55114064255886], [60.02302555918694, 105], [62.42394658155442, 105], [64.82486760392189, 104.1629936690594], [67.22578862628937, 105], [69.62670964865684, 101.6504340900202], [72.02763067102433, 104.28926777428002], [74.4285516933918, 104.87300068521733], [76.82947271575928, 104.58021567731146], [79.23039373812676, 105], [81.63131476049423, 105], [84.03223578286172, 105], [86.43315680522919, 104.80364285074208], [88.83407782759667, 104.77794519356206], [91.23499884996414, 105], [93.63591987233163, 105], [96.0368408946991, 103.69903209976204], [98.43776191706658, 101.69503833938363], [100.83868293943405, 105], [103.23960396180154, 105], [105.640524984169, 105], [108.04144600653649, 103.16761365960251], [110.44236702890396, 97.683633500428], [112.84328805127144, 92.18858012628138], [115.24420907363893, 92], [117.6451300960064, 91.51166718886213], [120.04605111837388, 88.4617701476263], [122.44697214074135, 81.01193972081813], [124.84789316310884, 76.87929290649016], [127.2488141854763, 75.21739150292008], [129.64973520784378, 75], [132.05065623021127, 75], [134.45157725257874, 72.90153300173287], [136.8524982749462, 67.19412814302287], [139.25341929731368, 65.13787691298074], [141.65434031968118, 65], [144.05526134204865, 65], [146.45618236441612, 63.003871695206186], [148.8571033867836, 59.725447308954514], [151.2580244091511, 55.077570280939035], [153.65894543151856, 55], [156.05986645388603, 55], [158.46078747625353, 54.50730609799368], [160.861708498621, 52.177844884188104], [163.26262952098847, 49.149130075572856], [165.66355054335594, 45], [168.06447156572344, 44.18227085359693], [170.4653925880909, 42], [172.86631361045838, 42], [175.26723463282585, 42], [177.66815565519335, 39.77431003855756], [180.06907667756082, 36.21785611651424], [182.46999769992829, 34.36363667433908], [184.87091872229576, 32], [187.27183974466325, 32], [189.67276076703072, 32], [192.0736817893982, 30.172472271419686], [194.4746028117657, 28], [196.87552383413316, 26.388169890558494], [199.27644485650063, 22], [201.6773658788681, 21.747307374923363], [204.0782869012356, 21], [206.47920792360307, 21], [208.88012894597054, 20.34632947888656], [211.281049968338, 18], [213.6819709907055, 18], [216.08289201307298, 18], [218.48381303544045, 12.9129114565855], [220.88473405780792, 11], [223.28565508017542, 9.309840999921853], [225.6865761025429, 8], [228.08749712491036, 8], [230.48841814727786, 7.271122564829628], [232.88933916964533, 7], [235.2902601920128, 5.204519959173727], [237.69118121438026, 0.03921568627450643], [240.09210223674773, 0]]]], "name": "boot_and_get_console_output", "created_at": "2017-11-03T18:31:48", "additive_output": [], "sla": [{"criterion": "max_avg_duration", "detail": "Average duration of one iteration 81.24s <= 45.00s - Failed", "success": false}, {"criterion": "failure_rate", "detail": "Failure rate criteria 0.00% <= 0.00% <= 0.00% - Passed", "success": true}, {"criterion": "aborted_on_sla", "detail": "Task was aborted due to SLA failure(s).", "success": false}]}];

      $scope.location = {
        /* #/path/hash/sub/div */
        normalize: function(str) {
          /* Remove unwanted characters from string */
          if (typeof str !== "string") { return "" }
          return str.replace(/[^\w\-\.]/g, "")
        },
        uri: function(obj) {
          /* Getter/Setter */
          if (! obj) {
            var uri = {path: "", hash: "", sub: "", div: ""};
            var arr = ["div", "sub", "hash", "path"];
            angular.forEach($location.url().split("/"), function(value){
              var v = $scope.location.normalize(value);
              if (v) { var k = arr.pop(); if (k) { this[k] = v }}
            }, uri);
            return uri
          }
          var arr = [obj.path, obj.hash, obj.sub, obj.div], res = [];
          for (var i in arr) { if (! arr[i]) { break }; res.push(arr[i]) }
          return $location.url("/" + res.join("/"))
        },
        path: function(path, hash) {
          /* Getter/Setter */
          if (path === "") { return this.uri({}) }
          path = this.normalize(path);
          var uri = this.uri();
          if (! path) { return uri.path }
          uri.path = path;
          var _hash = this.normalize(hash);
          if (_hash || hash === "") { uri.hash = _hash }
          return this.uri(uri)
        },
        hash: function(hash) {
          /* Getter/Setter */
          if (hash) { this.uri({path:this.uri().path, hash:hash}) }
          return this.uri().hash
        }
      }

      /* Dispatch */

      $scope.route = function(uri) {
        if (! $scope.scenarios_map) { return }

        // Expand menu if there is only one menu group
        if ($scope.nav.length === 1) {
          $scope.nav_idx = $scope.nav[0].idx;
        }

        if (uri.path in $scope.scenarios_map) {
          $scope.view = {is_scenario:true};
          $scope.scenario = $scope.scenarios_map[uri.path];
          $scope.nav_idx = $scope.nav_map[uri.path];
          if ($scope.scenario.iterations.histogram.views.length) {
            $scope.mainHistogram = $scope.scenario.iterations.histogram.views[0]
          }
          if ($scope.scenario.atomic.histogram.views.length) {
            $scope.atomicHistogram = $scope.scenario.atomic.histogram.views[0]
          }
          $scope.outputIteration = 0;
          $scope.showTab(uri);
        } else {
          $scope.scenario = null;
          if (uri.path === "source") {
            $scope.view = {is_source:true}
          } else {
            $scope.view = {is_main:true}
          }
        }
      }

      $scope.$on("$locationChangeSuccess", function (event, newUrl, oldUrl) {
        $scope.route($scope.location.uri())
      });

      $scope.showNav = function(nav_idx) { $scope.nav_idx = nav_idx }

      /* Tabs */

      $scope.tabs = [
        {
          id: "overview",
          name: "Overview",
          visible: function(){ return !! $scope.scenario.iterations.pie.length }
        },{
          id: "details",
          name: "Details",
          visible: function(){ return !! $scope.scenario.atomic.pie.length }
        },{
          id: "output",
          name: "Scenario Data",
          visible: function(){ return $scope.scenario.has_output }
        },{
          id: "hooks",
          name: "Hooks",
          visible: function(){ return $scope.scenario.hooks.length }
        },{
          id: "failures",
          name: "Failures",
          visible: function(){ return !! $scope.scenario.errors.length }
        },{
          id: "task",
          name: "Input task",
          visible: function(){ return !! $scope.scenario.config }
        }
      ];
      $scope.tabs_map = {};
      angular.forEach($scope.tabs,
                      function(tab){ this[tab.id] = tab }, $scope.tabs_map);

      $scope.showTab = function(uri) {
        $scope.tab = uri.hash in $scope.tabs_map ? uri.hash : "overview";
        if (uri.hash === "output") {
          if (typeof $scope.scenario.output === "undefined") {
            var has_additive = !! $scope.scenario.additive_output.length;
            var has_complete = !! ($scope.scenario.complete_output.length
                                   && $scope.scenario.complete_output[0].length);
            $scope.scenario.output = {
              has_additive: has_additive,
              has_complete: has_complete,
              length: has_additive + has_complete,
              active: has_additive ? "additive" : (has_complete ? "complete" : "")
            }
          }
          if (uri.sub && $scope.scenario.output["has_" + uri.sub]) {
            $scope.scenario.output.active = uri.sub
          }
        }
        else if (uri.hash === "hooks") {
          if ($scope.scenario.hooks.length) {
            var hook_idx = parseInt(uri.sub);

            if (isNaN(hook_idx) || ($scope.scenario.hooks.length - hook_idx) <= 0) {
              hook_idx = 0
            }

            if ($scope.scenario.hook_idx === hook_idx) {
              return
            }

            $scope.scenario.hooks.cur = $scope.scenario.hooks[hook_idx];
            $scope.scenario.hook_idx = hook_idx;
            if (typeof $scope.scenario.hooks.cur.active === "undefined") {
              if ($scope.scenario.hooks.cur.additive.length) {
                $scope.scenario.hooks.cur.active = "additive"
              }
              if ($scope.scenario.hooks.cur.complete.length) {
                if (typeof $scope.scenario.hooks.cur.active === "undefined") {
                  $scope.scenario.hooks.cur.active = "complete"
                }
                $scope.set_hook_run()
              }
            }
          }
        }
      }

      for (var i in $scope.tabs) {
        if ($scope.tabs[i].id === $scope.location.hash()) {
          $scope.tab = $scope.tabs[i].id
        }
        $scope.tabs[i].isVisible = function() {
          if ($scope.scenario) {
            if (this.visible()) { return true }
            /* If tab should be hidden but is selected - show another one */
            if (this.id === $scope.location.hash()) {
              for (var i in $scope.tabs) {
                var tab = $scope.tabs[i];
                if (tab.id != this.id && tab.visible()) {
                  $scope.tab = tab.id;
                  return false
                }
              }
            }
          }
          return false
        }
      }

      $scope.set_hook_run = function(idx) {
        if (typeof idx !== "undefined") {
          $scope.scenario.hooks.cur.run_idx = idx
        }
        else if (typeof $scope.scenario.hooks.cur.run_idx === "undefined") {
          $scope.scenario.hooks.cur.run_idx = 0
        }
        idx = $scope.scenario.hooks.cur.run_idx;
        if (($scope.scenario.hooks.cur.complete.length - idx) > 0) {
          $scope.scenario.hooks.cur.run = $scope.scenario.hooks.cur.complete[idx]
        }
      }

      $scope.complete_hooks_as_dropdown = function() {
        return $scope.scenario.hooks.cur.complete.length > 10
      }

      /* Other helpers */

      $scope.showError = function(message) {
          return (function (e) {
            e.style.display = "block";
            e.textContent = message
          })(document.getElementById("page-error"))
      }

      $scope.compact_atomics = function() {
        return ($scope.scenario && $scope.scenario.atomic.iter.length < 9)
      }

      /* Initialization */

      angular.element(document).ready(function(){
        if (! $scope.scenarios.length) {
          return $scope.showError("No data...")
        }

        /* Compose data mapping */

        $scope.nav = [];
        $scope.nav_map = {};
        $scope.scenarios_map = {};
        var met = [], itr = 0, cls_idx = 0;
        var prev_cls, prev_met;

        for (var idx in $scope.scenarios) {
          var sc = $scope.scenarios[idx];
          if (! prev_cls) {
            prev_cls = sc.cls
          }
          else if (prev_cls !== sc.cls) {
            $scope.nav.push({cls:prev_cls, met:met, idx:cls_idx});
            prev_cls = sc.cls;
            met = [];
            itr = 1;
            cls_idx += 1
          }

          if (prev_met !== sc.met) { itr = 1 };
          sc.ref = $scope.location.normalize(sc.cls+"."+sc.met+(itr > 1 ? "-"+itr : ""));
          $scope.scenarios_map[sc.ref] = sc;
          $scope.nav_map[sc.ref] = cls_idx;
          met.push({name:sc.name, itr:itr, idx:idx, ref:sc.ref});
          prev_met = sc.met;
          itr += 1;
        }

        if (met.length) {
          $scope.nav.push({cls:prev_cls, met:met, idx:cls_idx})
        }

        /* Start */

        var uri = $scope.location.uri();
        uri.path = $scope.location.path();
        $scope.route(uri);
        $scope.$digest()
      })
    };

    if (typeof angular === "object") {
      angular.module("App", [])
        .controller("Controller", ["$scope", "$location", controllerFunction])
        .directive("widget", widgetDirective)
    }


</script>
  <style>
    body { margin:0; padding:0 0 50px; font-size:14px; font-family:Helvetica,Arial,sans-serif }
    a, a:active, a:focus, a:visited { text-decoration:none; outline:none }
    p { margin:0; padding:5px 0 }
    p.thesis { padding:10px 0 }
    h1 { color:#666; margin:0 0 20px; font-size:30px; font-weight:normal }
    h2, .h2 { color:#666; margin:24px 0 6px; font-size:25px; font-weight:normal }
    h3, .h3 { color:#777; margin:12px 0 4px; font-size:18px; font-weight:normal }
    table { border-collapse:collapse; border-spacing:0; width:100%; font-size:12px; margin:0 0 10px }
    table th { text-align:left; padding:8px; color:#000; border:2px solid #ddd; border-width:0 0 2px 0 }
    table th.sortable { cursor:pointer }
    table td { text-align:left; border-top:1px solid #ddd; padding:8px; color:#333 }
    table.compact td { padding:4px 8px }
    table.striped tr:nth-child(odd) td { background:#f9f9f9 }
    table.linked tbody tr:hover { background:#f9f9f9; cursor:pointer }
    .pointer { cursor:pointer }
    .rich, .rich td { font-weight:bold }
    .code { padding:10px; font-size:13px; color:#333; background:#f6f6f6; border:1px solid #e5e5e5; border-radius:4px }

    .header { text-align:left; background:#333; font-size:18px; padding:13px 0; margin-bottom:20px; color:#fff; background-image:linear-gradient(to bottom, #444 0px, #222 100%) }
    .header a, .header a:visited, .header a:focus { color:#999 }

    .notify-error { padding:5px 10px; background:#fee; color:red }
    .status-skip, .status-skip td { color:grey }
    .status-pass, .status-pass td { color:green }
    .status-fail, .status-fail td { color:red }
    .capitalize { text-transform:capitalize }
    
    .aside { margin:0 20px 0 0; display:block; width:255px; float:left }
    .aside > div { margin-bottom: 15px }
    .aside > div div:first-child { border-top-left-radius:4px; border-top-right-radius:4px }
    .aside > div div:last-child { border-bottom-left-radius:4px; border-bottom-right-radius:4px }
    .navcls { color:#678; background:#eee; border:1px solid #ddd; margin-bottom:-1px; display:block; padding:8px 9px; font-weight:bold; text-align:left; overflow:hidden; text-overflow:ellipsis; white-space:nowrap; cursor:pointer }
    .navcls.expanded { color:#469 }
    .navcls.active { background:#428bca; background-image:linear-gradient(to bottom, #428bca 0px, #3278b3 100%); border-color:#3278b3; color:#fff }
    .navmet { color:#555; background:#fff; border:1px solid #ddd; font-size:12px; display:block; margin-bottom:-1px; padding:8px 10px; text-align:left; text-overflow:ellipsis; white-space:nowrap; overflow:hidden; cursor:pointer }
    .navmet:hover { background:#f8f8f8 }
    .navmet.active, .navmet.active:hover { background:#428bca; background-image:linear-gradient(to bottom, #428bca 0px, #3278b3 100%); border-color:#3278b3; color:#fff }

    .buttn { color:#555; background:#fff; border:1px solid #ddd; border-radius:5px; font-size:12px; margin-bottom:-1px; padding:5px 7px; text-align:left; text-overflow:ellipsis; white-space:nowrap; overflow:hidden; cursor:pointer }
    .buttn:hover { background:#f8f8f8 }
    .buttn.active, .bttn.active:hover { background:#428bca; background-image:linear-gradient(to bottom, #428bca 0px, #3278b3 100%); border-color:#3278b3; color:#fff; cursor:default }

    .tabs { list-style:outside none none; margin:0 0 5px; padding:0; border-bottom:1px solid #ddd }
    .tabs:after { clear:both }
    .tabs li { float:left; margin-bottom:-1px; display:block; position:relative }
    .tabs li div { border:1px solid transparent; border-radius:4px 4px 0 0; line-height:20px; margin-right:2px; padding:10px 15px; color:#428bca }
    .tabs li div:hover { border-color:#eee #eee #ddd; background:#eee; cursor:pointer; }
    .tabs li.active div { background:#fff; border-color:#ddd #ddd transparent; border-style:solid; border-width:1px; color:#555; cursor:default }
    .failure-mesg { color:#900 }
    .failure-trace { color:#333; white-space:pre; overflow:auto }

    .link { color:#428BCA; padding:5px 15px 5px 5px; text-decoration:underline; cursor:pointer }
    .link.active { color:#333; text-decoration:none; cursor:default }

    .chart { padding:0; margin:0; width:890px }
    .chart svg { height:300px; padding:0; margin:0; overflow:visible; float:right }
    .chart.lower svg { height:180px }
    .chart-label-y { font-size:12px; position:relative; top:5px; padding:0; margin:0 }

    .expandable { cursor:pointer }
    .clearfix { clear:both }
    .sortable > .arrow { display:inline-block; width:12px; height:inherit; color:#c90 }
    .content-main { margin:0 5px; display:block; float:left }

    .content-wrap {  margin:0 auto; padding:0 5px;  }
    
    @media only screen and (min-width: 320px)  { .content-wrap { width:900px  } .content-main { width:600px } }
    @media only screen and (min-width: 900px)  { .content-wrap { width:880px  } .content-main { width:590px } }
    @media only screen and (min-width: 1000px) { .content-wrap { width:980px  } .content-main { width:690px } }
    @media only screen and (min-width: 1100px) { .content-wrap { width:1080px } .content-main { width:790px } }
    @media only screen and (min-width: 1200px) { .content-wrap { width:1180px } .content-main { width:890px } }

  </style>
</head>
<body ng-controller="Controller">

  <div class="header" id="page-header">
    <div class="content-wrap">
      <a href="https://github.com/openstack/rally">Rally</a>&nbsp;
      <span>task results</span>
    </div>
  </div>

  <div class="content-wrap" id="page-content">
    

    <p id="page-error" class="notify-error" style="display:none"></p>

    <div id="content-nav" class="aside" ng-show="scenarios.length" ng-cloack>
      <div>
        <div class="navcls"
             ng-class="{active:view.is_main}"
             ng-click="location.path('')">Task overview</div>
        <div class="navcls"
             ng-class="{active:view.is_source}"
             ng-click="location.path('source', '')">Input file</div>
      </div>
      <div>
        <div class="navcls" title="{{n.cls}}"
             ng-repeat-start="n in nav track by $index"
             ng-click="showNav(n.idx)"
             ng-class="{expanded:n.idx==nav_idx}">
                <span ng-hide="n.idx==nav_idx">&#9658;</span>
                <span ng-show="n.idx==nav_idx">&#9660;</span>
                {{n.cls}}</div>
        <div class="navmet" title="{{m.name}}"
             ng-show="n.idx==nav_idx"
             ng-class="{active:m.ref==scenario.ref}"
             ng-click="location.path(m.ref)"
             ng-repeat="m in n.met track by $index"
             ng-repeat-end>{{m.name}}</div>
      </div>
    </div>

    <div id="content-main" class="content-main" ng-show="scenarios.length" ng-cloak>

      <div ng-show="view.is_main">
        <h1>Task overview</h1>
        <table class="linked compact"
               ng-init="ov_srt='ref'; ov_dir=false">
          <thead>
            <tr>
              <th class="sortable"
                  title="Scenario name, with optional suffix of call number"
                  ng-click="ov_srt='ref'; ov_dir=!ov_dir">
                Scenario
                <span class="arrow">
                  <b ng-show="ov_srt=='ref' && !ov_dir">&#x25b4;</b>
                  <b ng-show="ov_srt=='ref' && ov_dir">&#x25be;</b>
                </span>
              <th class="sortable"
                  title="How long the scenario run, without context duration"
                  ng-click="ov_srt='load_duration'; ov_dir=!ov_dir">
                Load duration (s)
                <span class="arrow">
                  <b ng-show="ov_srt=='load_duration' && !ov_dir">&#x25b4;</b>
                  <b ng-show="ov_srt=='load_duration' && ov_dir">&#x25be;</b>
                </span>
              <th class="sortable"
                  title="Scenario duration plus context duration"
                  ng-click="ov_srt='full_duration'; ov_dir=!ov_dir">
                Full duration (s)
                <span class="arrow">
                  <b ng-show="ov_srt=='full_duration' && !ov_dir">&#x25b4;</b>
                  <b ng-show="ov_srt=='full_duration' && ov_dir">&#x25be;</b>
                </span>
              <th class="sortable" title="Number of iterations"
                  ng-click="ov_srt='iterations_count'; ov_dir=!ov_dir">
                Iterations
                <span class="arrow">
                  <b ng-show="ov_srt=='iterations_count' && !ov_dir">&#x25b4;</b>
                  <b ng-show="ov_srt=='iterations_count' && ov_dir">&#x25be;</b>
                </span>
              <th class="sortable" title="Scenario runner type"
                  ng-click="ov_srt='runner'; ov_dir=!ov_dir">
                Runner
                <span class="arrow">
                  <b ng-show="ov_srt=='runner' && !ov_dir">&#x25b4;</b>
                  <b ng-show="ov_srt=='runner' && ov_dir">&#x25be;</b>
                </span>
              <th class="sortable" title="Number of errors occurred"
                  ng-click="ov_srt='errors.length'; ov_dir=!ov_dir">
                Errors
                <span class="arrow">
                  <b ng-show="ov_srt=='errors.length' && !ov_dir">&#x25b4;</b>
                  <b ng-show="ov_srt=='errors.length' && ov_dir">&#x25be;</b>
                </span>
              <th class="sortable" title="Number of hooks"
                  ng-click="ov_srt='hooks.length'; ov_dir=!ov_dir">
                Hooks
                <span class="arrow">
                  <b ng-show="ov_srt=='hooks.length' && !ov_dir">&#x25b4;</b>
                  <b ng-show="ov_srt=='hooks.length' && ov_dir">&#x25be;</b>
                </span>
              <th class="sortable" title="Whether SLA check is successful"
                  ng-click="ov_srt='sla_success'; ov_dir=!ov_dir">
                Success (SLA)
                <span class="arrow">
                  <b ng-show="ov_srt=='sla_success' && !ov_dir">&#x25b4;</b>
                  <b ng-show="ov_srt=='sla_success' && ov_dir">&#x25be;</b>
                </span>
            <tr>
          </thead>
          <tbody>
            <tr ng-repeat="sc in scenarios | orderBy:ov_srt:ov_dir"
                ng-click="location.path(sc.ref)">
              <td>{{sc.ref}}
              <td>{{sc.load_duration | number:3}}
              <td>{{sc.full_duration | number:3}}
              <td>{{sc.iterations_count}}
              <td>{{sc.runner}}
              <td>{{sc.errors.length}}
              <td>{{sc.hooks.length}}
              <td>
                <span ng-show="sc.sla_success" class="status-pass">&#x2714;</span>
                <span ng-hide="sc.sla_success" class="status-fail">&#x2716;</span>
            <tr>
          </tbody>
        </table>
      </div>

      <div ng-show="view.is_source">
        <h1>Input file</h1>
        <pre class="code">{{source}}</pre>
      </div>

      <div ng-show="view.is_scenario">
        <h1>{{scenario.cls}}.<wbr>{{scenario.name}} ({{scenario.full_duration | number:3}}s)</h1>
        <ul class="tabs">
          <li ng-repeat="t in tabs"
              ng-show="t.isVisible()"
              ng-class="{active:t.id == tab}"
              ng-click="location.hash(t.id)">
            <div>{{t.name}}</div>
          </li>
          <div class="clearfix"></div>
        </ul>
        <div ng-include="tab"></div>

        <script type="text/ng-template" id="overview">
          <p class="thesis">
            Load duration: <b>{{scenario.load_duration | number:3}} s</b> &nbsp;
            Full duration: <b>{{scenario.full_duration | number:3}} s</b> &nbsp;
            Iterations: <b>{{scenario.iterations_count}}</b> &nbsp;
            Failures: <b>{{scenario.errors.length}}</b> &nbsp;
            Started at: <b>{{scenario.created_at}}</b>
          </p>

          <div ng-show="scenario.sla.length">
            <h2>Service-level agreement</h2>
            <table class="striped">
              <thead>
                <tr>
                  <th>Criterion
                  <th>Detail
                  <th>Success
                <tr>
              </thead>
              <tbody>
                <tr class="rich"
                    ng-repeat="row in scenario.sla track by $index"
                    ng-class="{'status-fail':!row.success, 'status-pass':row.success}">
                  <td>{{row.criterion}}
                  <td>{{row.detail}}
                  <td class="capitalize">{{row.success}}
                <tr>
              </tbody>
            </table>
          </div>

          <div widget="Table"
               data="scenario.table"
               lastrow-class="rich"
               title="Total durations">
          </div>

          <div widget="StackedArea"
               data="scenario.iterations.iter"
               name-x="Iteration sequence number"
               controls="true"
               guide="true">
          </div>

          <div widget="StackedArea"
               data="scenario.load_profile"
               title="Load Profile"
               title-class="h3"
               name-x="Timeline (seconds)"
               format-y="d"
               format-x=",.2f"
               class="lower">
          </div>

          <div widget="Pie"
               data="scenario.iterations.pie"
               title="Distribution"
               title-class="h3"
               style="float:left; width:40%; margin-top:15px">
          </div>

          <div widget="Histogram"
               ng-if="scenario.iterations.histogram.data.length"
               data="scenario.iterations.histogram.data[mainHistogram.id]"
               style="float:left; width:59%; margin-top:15px; position:relative; top:40px">
          </div>

          <select ng-model="mainHistogram"
                  ng-show="scenario.iterations.histogram.data.length"
                  ng-options="i.name for i in scenario.iterations.histogram.views track by i.id"
                  style="float:right; margin:45px 35px 0">
          </select>

          <div class="clearfix"></div>

        </script>

        <script type="text/ng-template" id="details">

          <div widget="StackedArea"
               data="scenario.atomic.iter"
               title="Atomic Action Durations"
               name-x="Iteration sequence number"
               controls="true"
               guide="true">
          </div>

          <div widget="Pie"
               data="scenario.atomic.pie"
               title="Distribution"
               title-class="h3"
               style="float:left; margin-top:15px"
               ng-style="compact_atomics() ? {width:'40%'} : {}">
          </div>

          <div widget="Histogram" data="scenario.atomic.histogram.data[atomicHistogram.id]"
               ng-if="scenario.atomic.histogram.data.length"
               style="float:left; position:relative; top:40px"
               ng-style="compact_atomics() ? {width:'59%', 'margin-top':'15px'} : {}">
          </div>

          <select ng-show="scenario.atomic.histogram.data.length"
                  ng-model="atomicHistogram"
                  ng-options="i.name for i in scenario.atomic.histogram.views track by i.id"
                  style="float:right; margin:45px 35px 0">
          </select>

          <div class="clearfix"></div>

        </script>

        <script type="text/ng-template" id="output">

          <div style="padding:10px 0 0">
            <span class="link"
                  ng-click="location.hash('output/additive')"
                  ng-class="{active:scenario.output.active === 'additive'}"
                  ng-if="scenario.output.has_additive">Aggregated</span>
            <span class="link"
                  ng-click="location.hash('output/complete')"
                  ng-class="{active:scenario.output.active === 'complete'}"
                  ng-if="scenario.output.has_complete">Per iteration</span>
          </div>

          <div ng-repeat="chart in scenario.additive_output"
               ng-if="scenario.output.active === 'additive'">
            <div widget="{{chart.widget}}"
                 title="{{chart.title}}"
                 description="{{chart.description}}"
                 name-x="{{chart.axis_label}}"
                 name-y="{{chart.label}}"
                 data="chart.data">
            </div>
          </div>

          <div ng-if="scenario.output.active === 'complete'" style="padding:10px 0 0">
            <select ng-model="outputIteration">
              <option ng-repeat="i in scenario.complete_output track by $index"
                      value="{{$index}}">
                Iteration {{$index}}
            </select>

            <div ng-repeat="chart in scenario.complete_output[outputIteration]">
              <div widget="{{chart.widget}}"
                   title="{{chart.title}}"
                   description="{{chart.description}}"
                   name-x="{{chart.axis_label}}"
                   name-y="{{chart.label}}"
                   data="chart.data">
              </div>
            </div>
          </div>
        </script>

        <script type="text/ng-template" id="hooks">

          <div style="padding:15px 0">
            <span ng-repeat="h in scenario.hooks track by $index"
                  class="buttn"
                  title="{{h.desc}}"
                  style="margin:0 10px 0 0"
                  ng-click="location.hash('hooks/'+$index)"
                  ng-class="{active:scenario.hook_idx===$index}">
              {{h.name}}
            </span>
          </div>

          <table class="striped" style="margin:5px 0 25px">
            <thead>
              <tr>
                <th>Plugin
                <th>Description
            </thead>
            <tbody>
              <tr>
                <td>{{scenario.hooks.cur.name}}
                <td>{{scenario.hooks.cur.desc}}
            </tbody>
          </table>

          <div>
            <span class="link"
                  ng-click="scenario.hooks.cur.active = 'additive'"
                  ng-class="{active:scenario.hooks.cur.active === 'additive'}"
                  ng-if="scenario.hooks.cur.additive.length">Aggregated</span>
            <span class="link"
                  ng-click="scenario.hooks.cur.active = 'complete'"
                  ng-class="{active:scenario.hooks.cur.active === 'complete'}"
                  ng-if="scenario.hooks.cur.complete.length">Per hook run</span>
          </div>

          <div ng-repeat="chart in scenario.hooks.cur.additive"
               ng-if="scenario.hooks.cur.active === 'additive'">
            <div widget="{{chart.widget}}"
                 title="{{chart.title}}"
                 description="{{chart.description}}"
                 name-x="{{chart.axis_label}}"
                 name-y="{{chart.label}}"
                 data="chart.data">
            </div>
          </div>

          <div ng-if="scenario.hooks.cur.active === 'complete'" style="padding:10px 0 0">

            <select ng-if="complete_hooks_as_dropdown()"
                    ng-model="scenario.hooks.cur.run_idx"
                    ng-change="set_hook_run()">
              <option ng-repeat="h in scenario.hooks.cur.complete track by $index"
                      ng-selected="scenario.hooks.cur.run_idx == $index"
                      value="{{$index}}">
                {{h.triggered_by}}
            </select>

            <div ng-if="! complete_hooks_as_dropdown()"
                 style="border:#ccc solid; border-width:1px 0 0; padding:5px 0 0">
              <span ng-repeat="h in scenario.hooks.cur.complete track by $index"
                    class="link"
                    ng-class="{active:scenario.hooks.cur.run_idx == $index}"
                    ng-click="set_hook_run($index)">
                {{h.triggered_by}}
              </span>
            </div>

            <table class="striped" style="margin:15px 0 15px">
              <thead>
                <tr>
                  <th>Status
                  <th>Triggered by
                  <th>Started at
                  <th>Finished at
              </thead>
              <tbody>
                <tr>
                  <td ng-style="scenario.hooks.cur.run.status === 'success' ? {color:'green'} : {color:'red'}">
                    <b>{{scenario.hooks.cur.run.status}}</b>
                  <td>{{scenario.hooks.cur.run.triggered_by}}
                  <td>{{scenario.hooks.cur.run.started_at}}
                  <td>{{scenario.hooks.cur.run.finished_at}}
              </tbody>
            </table>

            <div ng-repeat="chart in scenario.hooks.cur.run.charts">
              <div widget="{{chart.widget}}"
                   title="{{chart.title}}"
                   description="{{chart.description}}"
                   name-x="{{chart.axis_label}}"
                   name-y="{{chart.label}}"
                   data="chart.data">
              </div>
            </div>
          </div>
        </script>

        <script type="text/ng-template" id="failures">
          <h2>Task failures (<ng-pluralize
            count="scenario.errors.length"
            when="{'1': '1 iteration', 'other': '{} iterations'}"></ng-pluralize> failed)
          </h2>
          <table class="striped">
            <thead>
              <tr>
                <th>
                <th>Iteration
                <th>Exception type
                <th>Exception message
              </tr>
            </thead>
            <tbody>
              <tr class="expandable"
                  ng-repeat-start="i in scenario.errors track by $index"
                  ng-click="i.expanded = ! i.expanded">
                <td>
                  <span ng-hide="i.expanded">&#9658;</span>
                  <span ng-show="i.expanded">&#9660;</span>
                <td>{{i.iteration}}
                <td>{{i.type}}
                <td class="failure-mesg">{{i.message}}
              </tr>
              <tr ng-show="i.expanded" ng-repeat-end>
                <td colspan="4" class="failure-trace">{{i.traceback}}
              </tr>
            </tbody>
          </table>
        </script>

        <script type="text/ng-template" id="task">
          <h2>Subtask Configuration</h2>
          <pre class="code">{{scenario.config}}</pre>
        </script>
      </div>

    </div>
    <div class="clearfix"></div>


  </div>

  <script type="text/javascript">
    if (! window.angular) {(function(f){
      f(document.getElementById("content-nav"), "none");
      f(document.getElementById("content-main"), "none");
      f(document.getElementById("page-error"), "block").textContent = "Failed to load AngularJS framework"
    })(function(e, s){e.style.display = s; return e})}
</script>
</body>
</html>